import{b as V,c as j,f as B,j as N,k as $,m as L,q as W}from"./chunk-TWKAALTM.js";import{a as U}from"./chunk-LVGQPJ4G.js";import{l as O,m as R,n as P,q as D}from"./chunk-E6ASQAUT.js";import{$a as x,Ea as o,Fa as M,Sa as m,Va as u,Ya as g,Za as r,_a as i,ba as w,cb as F,fb as f,gb as c,ka as C,kb as a,la as h,lb as p,mb as v,nb as S,qb as k,rb as A,sb as E,ub as I,vb as T,xb as b,yb as y}from"./chunk-7EVLTLXU.js";var z=()=>[];function G(s,t){if(s&1){let e=F();r(0,"div",41)(1,"div",42)(2,"div",43),x(3,"i",4),i(),r(4,"div")(5,"div",44),a(6),i(),r(7,"div",28),a(8),i(),r(9,"div",45)(10,"span",46),a(11),b(12,"titlecase"),i(),r(13,"span",47),a(14),i()()()(),r(15,"label",48)(16,"input",49),f("change",function(){let l=C(e).$implicit,d=c().$implicit,_=c(2);return h(_.togglePlanFeatureAccess(d,l.id))}),i(),x(17,"div",50),i()()}if(s&2){let e=t.$implicit,n=c().$implicit,l=c(2);o(3),g(l.getModuleIcon(e.module)),o(3),p(e.name),o(2),p(e.description),o(2),g(l.getCategoryColor(e.category)),o(),v(" ",y(12,9,e.category)," "),o(3),p(e.module),o(2),u("checked",l.hasFeatureAccess(n,e.id))}}function H(s,t){if(s&1&&(r(0,"div",34)(1,"div",35)(2,"div")(3,"h3",36),a(4),i(),r(5,"p",4),a(6,"Configure feature access for this subscription plan"),i()(),r(7,"div",37)(8,"div",28),a(9,"Features Enabled"),i(),r(10,"div",38),a(11),i()()(),r(12,"div",39),m(13,G,18,11,"div",40),i()()),s&2){let e=t.$implicit,n=c(2);o(4),p(e.planName),o(7),S(" ",n.getEnabledFeaturesCount(e),"/",n.getTotalFeaturesCount(e)," "),o(2),u("ngForOf",n.getFilteredFeatures())}}function J(s,t){if(s&1&&(r(0,"div",32),m(1,H,14,4,"div",33),i()),s&2){let e=c();o(),u("ngForOf",e.planAccess)}}function K(s,t){if(s&1&&(r(0,"span",61),a(1),b(2,"titlecase"),i()),s&2){let e=t.$implicit;o(),v(" ",y(2,1,e)," ")}}function Q(s,t){if(s&1&&(r(0,"div",57)(1,"div",58),a(2,"Permissions:"),i(),r(3,"div",59),m(4,K,3,3,"span",60),i()()),s&2){let e=c().$implicit,n=c().$implicit;o(4),u("ngForOf",n.permissions[e.id]||T(1,z))}}function X(s,t){if(s&1){let e=F();r(0,"div",52)(1,"div",53)(2,"div",42)(3,"div",54),x(4,"i",55),i(),r(5,"div")(6,"div",44),a(7),i(),r(8,"span",46),a(9),b(10,"titlecase"),i()()(),r(11,"label",48)(12,"input",49),f("change",function(){let l=C(e).$implicit,d=c().$implicit,_=c(2);return h(_.toggleRoleFeatureAccess(d,l.id))}),i(),x(13,"div",50),i()(),m(14,Q,5,2,"div",56),i()}if(s&2){let e=t.$implicit,n=c().$implicit,l=c(2);o(4),g(l.getModuleIcon(e.module)),o(3),p(e.name),o(),g(l.getCategoryColor(e.category)),o(),v(" ",y(10,8,e.category)," "),o(3),u("checked",l.hasRoleAccess(n,e.id)),o(2),u("ngIf",l.hasRoleAccess(n,e.id))}}function Y(s,t){if(s&1&&(r(0,"div",34)(1,"div",35)(2,"div")(3,"h3",36),a(4),i(),r(5,"p",4),a(6,"Configure feature permissions for this user role"),i()(),r(7,"div",37)(8,"div",28),a(9,"Features Accessible"),i(),r(10,"div",38),a(11),i()()(),r(12,"div",39),m(13,X,15,10,"div",51),i()()),s&2){let e=t.$implicit,n=c(2);o(4),p(e.roleName),o(7),S(" ",n.getEnabledRoleFeaturesCount(e),"/",n.getTotalRoleFeaturesCount(e)," "),o(2),u("ngForOf",n.getFilteredFeatures())}}function Z(s,t){if(s&1&&(r(0,"div",32),m(1,Y,14,4,"div",33),i()),s&2){let e=c();o(),u("ngForOf",e.roleAccess)}}var q=class s{constructor(t){this.mockDataService=t}features=[];planAccess=[];roleAccess=[];selectedView="plans";selectedCategory="all";searchTerm="";subscriptions=[];ngOnInit(){this.loadFeatures(),this.loadPlanAccess(),this.loadRoleAccess()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}loadFeatures(){let t=this.mockDataService.getFeatures().subscribe(e=>{this.features=e});this.subscriptions.push(t)}loadPlanAccess(){let t=this.mockDataService.getPlanFeatureAccess().subscribe(e=>{this.planAccess=e});this.subscriptions.push(t)}loadRoleAccess(){let t=this.mockDataService.getRoleFeatureAccess().subscribe(e=>{this.roleAccess=e});this.subscriptions.push(t)}getFilteredFeatures(){return this.features.filter(t=>{let e=this.selectedCategory==="all"||t.category===this.selectedCategory,n=t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description.toLowerCase().includes(this.searchTerm.toLowerCase());return e&&n})}getFeaturesByCategory(t){return this.features.filter(e=>e.category===t)}hasFeatureAccess(t,e){return t.features[e]||!1}hasRoleAccess(t,e){return t.features[e]||!1}togglePlanFeatureAccess(t,e){let n=!t.features[e];this.mockDataService.updatePlanFeatureAccess(t.planId,e,n),console.log("Updated plan feature access:",t.planId,e,n)}toggleRoleFeatureAccess(t,e){let n=!t.features[e];this.mockDataService.updateRoleFeatureAccess(t.roleId,e,n),console.log("Updated role feature access:",t.roleId,e,n)}getCategoryColor(t){switch(t){case"core":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"advanced":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"premium":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}}getModuleIcon(t){return{POS:"fas fa-cash-register",Menu:"fas fa-utensils",Inventory:"fas fa-boxes",Staff:"fas fa-users",CRM:"fas fa-user-friends",Analytics:"fas fa-chart-bar",Integration:"fas fa-plug",Branding:"fas fa-palette"}[t]||"fas fa-cog"}saveChanges(){console.log("Saving feature access control changes...")}resetToDefaults(){console.log("Resetting to default feature access...")}getEnabledFeaturesCount(t){return Object.values(t.features).filter(e=>e).length}getTotalFeaturesCount(t){return Object.keys(t.features).length}getEnabledRoleFeaturesCount(t){return Object.values(t.features).filter(e=>e).length}getTotalRoleFeaturesCount(t){return Object.keys(t.features).length}static \u0275fac=function(e){return new(e||s)(M(U))};static \u0275cmp=w({type:s,selectors:[["app-feature-access-control"]],standalone:!0,features:[I],decls:70,vars:11,consts:[[1,"p-6"],[1,"mb-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300"],[1,"flex","space-x-3"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","space-x-2",3,"click"],[1,"fas","fa-save"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors","flex","items-center","space-x-2",3,"click"],[1,"fas","fa-undo"],[1,"pos-card","rounded-2xl","p-6","mb-6"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"flex","space-x-2"],[1,"px-4","py-2","rounded-lg","transition-colors",3,"click"],[1,"px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-primary-500","focus:border-transparent","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["value","all"],["value","core"],["value","advanced"],["value","premium"],[1,"flex-1","min-w-64"],["type","text","placeholder","Search features...",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-primary-500","focus:border-transparent","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["class","space-y-6",4,"ngIf"],[1,"pos-card","rounded-2xl","p-6","mt-6"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center"],[1,"text-3xl","font-bold","text-blue-600","dark:text-blue-400","mb-2"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-400","mt-1"],[1,"text-3xl","font-bold","text-green-600","dark:text-green-400","mb-2"],[1,"text-3xl","font-bold","text-purple-600","dark:text-purple-400","mb-2"],[1,"space-y-6"],["class","pos-card rounded-2xl p-6",4,"ngFor","ngForOf"],[1,"pos-card","rounded-2xl","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-right"],[1,"text-2xl","font-bold","text-primary-600","dark:text-primary-400"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-4","border","border-gray-200","dark:border-gray-700","rounded-lg"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","rounded-lg","bg-gray-100","dark:bg-gray-700","flex","items-center","justify-center"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2","mt-1"],[1,"px-2","py-1","text-xs","rounded-full"],[1,"text-xs","text-gray-400"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-primary-300","dark:peer-focus:ring-primary-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary-600"],["class","p-4 border border-gray-200 dark:border-gray-700 rounded-lg",4,"ngFor","ngForOf"],[1,"p-4","border","border-gray-200","dark:border-gray-700","rounded-lg"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-8","h-8","rounded-lg","bg-gray-100","dark:bg-gray-700","flex","items-center","justify-center"],[1,"text-gray-600","dark:text-gray-300","text-sm"],["class","space-y-2",4,"ngIf"],[1,"space-y-2"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"flex","flex-wrap","gap-1"],["class","px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 text-xs rounded-full",4,"ngFor","ngForOf"],[1,"px-2","py-1","bg-blue-100","dark:bg-blue-900/30","text-blue-800","dark:text-blue-400","text-xs","rounded-full"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),a(5,"Feature Access Control"),i(),r(6,"p",4),a(7,"Manage feature availability across plans and user roles"),i()(),r(8,"div",5)(9,"button",6),f("click",function(){return n.saveChanges()}),x(10,"i",7),r(11,"span"),a(12,"Save Changes"),i()(),r(13,"button",8),f("click",function(){return n.resetToDefaults()}),x(14,"i",9),r(15,"span"),a(16,"Reset"),i()()()()(),r(17,"div",10)(18,"div",11)(19,"div")(20,"label",12),a(21,"View"),i(),r(22,"div",13)(23,"button",14),f("click",function(){return n.selectedView="plans"}),a(24," By Plans "),i(),r(25,"button",14),f("click",function(){return n.selectedView="roles"}),a(26," By Roles "),i()()(),r(27,"div")(28,"label",12),a(29,"Category"),i(),r(30,"select",15),E("ngModelChange",function(d){return A(n.selectedCategory,d)||(n.selectedCategory=d),d}),r(31,"option",16),a(32,"All Categories"),i(),r(33,"option",17),a(34,"Core Features"),i(),r(35,"option",18),a(36,"Advanced Features"),i(),r(37,"option",19),a(38,"Premium Features"),i()()(),r(39,"div",20)(40,"label",12),a(41,"Search Features"),i(),r(42,"input",21),E("ngModelChange",function(d){return A(n.searchTerm,d)||(n.searchTerm=d),d}),i()()()(),m(43,J,2,1,"div",22)(44,Z,2,1,"div",22),r(45,"div",23)(46,"h3",24),a(47,"Feature Overview"),i(),r(48,"div",25)(49,"div",26)(50,"div",27),a(51),i(),r(52,"div",28),a(53,"Core Features"),i(),r(54,"div",29),a(55,"Available to all plans"),i()(),r(56,"div",26)(57,"div",30),a(58),i(),r(59,"div",28),a(60,"Advanced Features"),i(),r(61,"div",29),a(62,"Professional+ plans"),i()(),r(63,"div",26)(64,"div",31),a(65),i(),r(66,"div",28),a(67,"Premium Features"),i(),r(68,"div",29),a(69,"Enterprise only"),i()()()()()),e&2&&(o(23),g(n.selectedView==="plans"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),o(2),g(n.selectedView==="roles"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),o(5),k("ngModel",n.selectedCategory),o(12),k("ngModel",n.searchTerm),o(),u("ngIf",n.selectedView==="plans"),o(),u("ngIf",n.selectedView==="roles"),o(7),p(n.getFeaturesByCategory("core").length),o(7),p(n.getFeaturesByCategory("advanced").length),o(7),p(n.getFeaturesByCategory("premium").length))},dependencies:[D,O,R,P,W,$,L,V,N,j,B]})};export{q as FeatureAccessControlComponent};
