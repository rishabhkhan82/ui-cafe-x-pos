import{a as P}from"./chunk-EFGL7IQN.js";import{q as j}from"./chunk-TWKAALTM.js";import{a as N}from"./chunk-LVGQPJ4G.js";import{l as D,m as _,n as F,q as M}from"./chunk-E6ASQAUT.js";import{$a as l,Ea as s,Fa as v,Sa as x,Va as m,Ya as u,Za as e,_a as t,a as b,b as y,ba as S,cb as E,fb as C,gb as f,ka as k,kb as i,la as w,lb as d,mb as c,nb as h,ub as T,xb as I,yb as O}from"./chunk-7EVLTLXU.js";function B(o,r){if(o&1){let n=E();e(0,"button",53),C("click",function(){let g=k(n).$implicit,p=f();return w(p.executeQuickAction(g.action))}),l(1,"i",54),e(2,"span",55),i(3),t()()}if(o&2){let n=r.$implicit;u(n.color),s(),u(n.icon),s(2),d(n.name)}}function A(o,r){if(o&1&&(e(0,"div",56)(1,"div",5)(2,"div",57),l(3,"i",4),t(),e(4,"div")(5,"p",58),i(6),t(),e(7,"p",59),i(8),t()()(),e(9,"div",6)(10,"p",60),i(11),t(),e(12,"p",61),i(13),I(14,"titlecase"),t()()()),o&2){let n=r.$implicit,a=f();s(3),u(a.getPaymentMethodIcon(n.paymentMethod)),s(3),d(n.customerName),s(2),h("",n.orderId," \u2022 ",a.formatTime(n.timestamp),""),s(3),d(a.formatCurrency(n.amount)),s(),u(a.getTransactionStatusColor(n.status)),s(),c(" ",O(14,9,n.status)," ")}}function H(o,r){o&1&&(e(0,"div",62),l(1,"i",63),e(2,"p"),i(3,"No recent transactions"),t()())}function U(o,r){if(o&1&&(e(0,"div",64)(1,"div",5)(2,"div",65),l(3,"i",66),t(),e(4,"div")(5,"p",58),i(6),t(),e(7,"p",59),i(8),t()()(),e(9,"div",6)(10,"p",67),i(11),t(),e(12,"p",59),i(13),t()()()),o&2){let n=r.$implicit,a=f();s(6),c("#",n.id.split("-").pop(),""),s(2),h("",n.customerName," \u2022 Table ",n.tableNumber,""),s(3),d(a.formatCurrency(n.totalAmount)),s(2),c("",n.items.length," items")}}function V(o,r){o&1&&(e(0,"div",62),l(1,"i",68),e(2,"p"),i(3,"No pending bills"),t()())}var R=class o{constructor(r,n){this.mockDataService=r;this.realtimeService=n}subscriptions=[];currentUser=null;stats={todaysSales:0,pendingBills:0,activeTables:0,shiftHours:0,transactionsToday:0,avgTransactionValue:0};quickActions=[];recentTransactions=[];pendingOrders=[];ngOnInit(){this.initializeData(),this.setupRealtimeSubscriptions(),this.calculateStats()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}initializeData(){this.currentUser=this.mockDataService.getUserByRole("cashier")||null,this.mockDataService.getQuickActions().subscribe(r=>{this.quickActions=r}),this.mockDataService.getRecentTransactions().subscribe(r=>{this.recentTransactions=r,this.calculateStats()}),this.mockDataService.getCashierStats().subscribe(r=>{r.length>0&&(this.stats=b(b({},this.stats),r[0]))}),this.loadPendingOrders()}setupRealtimeSubscriptions(){let r=this.realtimeService.newOrder$.subscribe(a=>{a&&(this.loadPendingOrders(),this.calculateStats())});this.subscriptions.push(r);let n=this.realtimeService.orderUpdate$.subscribe(a=>{a&&(this.loadPendingOrders(),this.calculateStats())});this.subscriptions.push(n)}loadPendingOrders(){this.mockDataService.getOrders().subscribe(r=>{this.pendingOrders=r.filter(n=>n.status==="ready"&&n.paymentStatus==="pending"),this.calculateStats()})}calculateStats(){let r=new Date;r.setHours(0,0,0,0);let n=0,a=0;this.recentTransactions.forEach(g=>{let p=new Date(g.timestamp);p.setHours(0,0,0,0),p.getTime()===r.getTime()&&g.status==="success"&&(n++,a+=g.amount)}),this.stats=y(b({},this.stats),{todaysSales:a,pendingBills:this.pendingOrders.length,transactionsToday:n,avgTransactionValue:n>0?a/n:0}),this.mockDataService.updateCashierStats(this.stats)}executeQuickAction(r){switch(r){case"newBill":this.newBill();break;case"searchOrder":this.searchOrder();break;case"splitBill":this.splitBill();break;case"openCashDrawer":this.openCashDrawer();break;case"shiftReport":this.shiftReport();break;case"managerOverride":this.managerOverride();break}}newBill(){console.log("Creating new bill...")}searchOrder(){console.log("Opening order search...")}splitBill(){console.log("Opening bill splitting...")}openCashDrawer(){console.log("Opening cash drawer...")}shiftReport(){console.log("Generating shift report...")}managerOverride(){console.log("Opening manager override...")}formatCurrency(r){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r)}formatTime(r){return new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(r)}getCurrentTime(){return new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date)}getTransactionStatusColor(r){switch(r){case"success":return"text-green-600";case"failed":return"text-red-600";case"pending":return"text-yellow-600";default:return"text-gray-600"}}getPaymentMethodIcon(r){switch(r.toLowerCase()){case"cash":return"fas fa-money-bill-wave";case"card":return"fas fa-credit-card";case"upi":return"fas fa-mobile-alt";case"wallet":return"fas fa-wallet";default:return"fas fa-question-circle"}}getSalesPerHour(){return Math.round(this.stats.todaysSales/Math.max(this.stats.shiftHours,1)).toLocaleString("en-IN")}static \u0275fac=function(n){return new(n||o)(v(N),v(P))};static \u0275cmp=S({type:o,selectors:[["app-cashier-dashboard"]],standalone:!0,features:[T],decls:103,vars:16,consts:[[1,"p-6"],[1,"mb-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-3"],[1,"text-right"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-lg","font-bold","text-gray-900","dark:text-white"],[1,"w-12","h-12","bg-gradient-to-br","from-green-500","to-green-700","rounded-xl","flex","items-center","justify-center"],[1,"fas","fa-cash-register","text-white","text-xl"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-gradient-to-br","from-blue-50","to-blue-100","dark:from-blue-900/20","dark:to-blue-800/20","rounded-2xl","p-6","border","border-blue-200","dark:border-blue-800"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-12","h-12","rounded-xl","bg-blue-500","flex","items-center","justify-center"],[1,"fas","fa-indian-rupee-sign","text-white"],[1,"text-blue-600","dark:text-blue-400","text-sm","font-medium"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-1"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"bg-gradient-to-br","from-orange-50","to-orange-100","dark:from-orange-900/20","dark:to-orange-800/20","rounded-2xl","p-6","border","border-orange-200","dark:border-orange-800"],[1,"w-12","h-12","rounded-xl","bg-orange-500","flex","items-center","justify-center"],[1,"fas","fa-clock","text-white"],[1,"text-orange-600","dark:text-orange-400","text-sm","font-medium"],[1,"bg-gradient-to-br","from-green-50","to-green-100","dark:from-green-900/20","dark:to-green-800/20","rounded-2xl","p-6","border","border-green-200","dark:border-green-800"],[1,"w-12","h-12","rounded-xl","bg-green-500","flex","items-center","justify-center"],[1,"fas","fa-table","text-white"],[1,"text-green-600","dark:text-green-400","text-sm","font-medium"],[1,"bg-gradient-to-br","from-purple-50","to-purple-100","dark:from-purple-900/20","dark:to-purple-800/20","rounded-2xl","p-6","border","border-purple-200","dark:border-purple-800"],[1,"w-12","h-12","rounded-xl","bg-purple-500","flex","items-center","justify-center"],[1,"fas","fa-business-time","text-white"],[1,"text-purple-600","dark:text-purple-400","text-sm","font-medium"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6","mb-8"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","mb-4","flex","items-center"],[1,"fas","fa-bolt","mr-3","text-yellow-500"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],["class","p-4 rounded-xl text-white font-semibold transition-all duration-200 hover:scale-105 hover:shadow-lg flex flex-col items-center space-y-2",3,"class","click",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6"],[1,"text-primary-500","text-sm","hover:text-primary-600"],[1,"fas","fa-external-link-alt","mr-1"],[1,"space-y-3"],["class","flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-orange-100","dark:bg-orange-900/30","text-orange-600"],[1,"space-y-3","max-h-80","overflow-y-auto"],["class","flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg p-2 transition-colors",4,"ngFor","ngForOf"],[1,"mt-6","bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6"],[1,"fas","fa-chart-line","mr-3","text-green-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center"],[1,"text-2xl","font-bold","text-blue-600","mb-1"],[1,"text-2xl","font-bold","text-green-600","mb-1"],[1,"text-2xl","font-bold","text-purple-600","mb-1"],[1,"p-4","rounded-xl","text-white","font-semibold","transition-all","duration-200","hover:scale-105","hover:shadow-lg","flex","flex-col","items-center","space-y-2",3,"click"],[1,"text-2xl"],[1,"text-sm","text-center"],[1,"flex","items-center","justify-between","py-3","border-b","border-gray-100","dark:border-gray-700","last:border-b-0"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","bg-gray-100","dark:bg-gray-700"],[1,"font-medium","text-gray-900","dark:text-white","text-sm"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"text-xs"],[1,"text-center","py-8","text-gray-500","dark:text-gray-400"],[1,"fas","fa-receipt","text-3xl","mb-2"],[1,"flex","items-center","justify-between","py-3","border-b","border-gray-100","dark:border-gray-700","last:border-b-0","cursor-pointer","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-lg","p-2","transition-colors"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","bg-blue-100","dark:bg-blue-900/30"],[1,"fas","fa-utensils","text-blue-600","dark:text-blue-400"],[1,"font-semibold","text-green-600"],[1,"fas","fa-check-circle","text-3xl","mb-2"]],template:function(n,a){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),i(5,"Cashier Dashboard"),t(),e(6,"p",4),i(7),t()(),e(8,"div",5)(9,"div",6)(10,"div",7),i(11,"Current Time"),t(),e(12,"div",8),i(13),t()(),e(14,"div",9),l(15,"i",10),t()()()(),e(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14),l(20,"i",15),t(),e(21,"span",16),i(22,"Today's Sales"),t()(),e(23,"div",17),i(24),t(),e(25,"div",18),i(26),t()(),e(27,"div",19)(28,"div",13)(29,"div",20),l(30,"i",21),t(),e(31,"span",22),i(32,"Pending Bills"),t()(),e(33,"div",17),i(34),t(),e(35,"div",18),i(36,"Ready for payment"),t()(),e(37,"div",23)(38,"div",13)(39,"div",24),l(40,"i",25),t(),e(41,"span",26),i(42,"Active Tables"),t()(),e(43,"div",17),i(44),t(),e(45,"div",18),i(46,"Currently occupied"),t()(),e(47,"div",27)(48,"div",13)(49,"div",28),l(50,"i",29),t(),e(51,"span",30),i(52,"Shift Hours"),t()(),e(53,"div",17),i(54),t(),e(55,"div",18),i(56,"Current shift"),t()()(),e(57,"div",31)(58,"h3",32),l(59,"i",33),i(60,"Quick Actions "),t(),e(61,"div",34),x(62,B,4,5,"button",35),t()(),e(63,"div",36)(64,"div",37)(65,"div",13)(66,"h3",8),i(67,"Recent Transactions"),t(),e(68,"button",38),l(69,"i",39),i(70,"View All "),t()(),e(71,"div",40),x(72,A,15,11,"div",41)(73,H,4,0,"div",42),t()(),e(74,"div",37)(75,"div",13)(76,"h3",8),i(77,"Pending Bills"),t(),e(78,"span",43),i(79),t()(),e(80,"div",44),x(81,U,14,5,"div",45)(82,V,4,0,"div",42),t()()(),e(83,"div",46)(84,"h3",32),l(85,"i",47),i(86,"Today's Performance "),t(),e(87,"div",48)(88,"div",49)(89,"div",50),i(90),t(),e(91,"div",18),i(92,"Total Transactions"),t()(),e(93,"div",49)(94,"div",51),i(95),t(),e(96,"div",18),i(97,"Average Transaction"),t()(),e(98,"div",49)(99,"div",52),i(100),t(),e(101,"div",18),i(102,"Sales per Hour"),t()()()()()),n&2&&(s(7),c("Welcome back, ",a.currentUser==null?null:a.currentUser.name," \u2022 Shift Overview"),s(6),d(a.getCurrentTime()),s(11),d(a.formatCurrency(a.stats.todaysSales)),s(2),c("",a.stats.transactionsToday," transactions"),s(8),d(a.stats.pendingBills),s(10),d(a.stats.activeTables),s(10),c("",a.stats.shiftHours,"h"),s(8),m("ngForOf",a.quickActions),s(10),m("ngForOf",a.recentTransactions.slice(0,5)),s(),m("ngIf",a.recentTransactions.length===0),s(6),c(" ",a.pendingOrders.length," bills "),s(2),m("ngForOf",a.pendingOrders.slice(0,5)),s(),m("ngIf",a.pendingOrders.length===0),s(8),d(a.stats.transactionsToday),s(5),d(a.formatCurrency(a.stats.avgTransactionValue)),s(5),c("\u20B9",a.getSalesPerHour(),""))},dependencies:[M,D,_,F,j]})};export{R as CashierDashboardComponent};
