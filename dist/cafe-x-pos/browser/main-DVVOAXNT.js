import{a as Fe}from"./chunk-WUE66JDZ.js";import{a as w}from"./chunk-HVZF2A4K.js";import{a as Ie,b as z,c as Ne,d as He,e as Ae,f as De,g as Oe,h as Pe,i as H,j as $e,k as je,l as q}from"./chunk-7XBOO3UA.js";import{a as Le}from"./chunk-7C3C72CK.js";import{d as Te,l as Me,m as V,q as Q}from"./chunk-D6F33BNN.js";import{$a as d,A as le,Aa as ye,B as R,Bb as ke,Ca as be,E as de,Ea as l,Fa as D,G as pe,Ga as Ee,Ia as Se,Ib as Re,Ja as Ce,K as me,Kb as U,Ma as xe,N as re,P as I,Q as ue,Sa as v,T as u,Va as f,W as ge,Wa as _e,Xa as ie,Y as h,Ya as $,Z as T,Za as a,_a as s,a as g,ab as j,b as te,ba as P,bb as L,cb as M,d as ae,fa as he,fb as S,g as se,gb as m,jb as we,k as b,ka as x,kb as p,la as _,lb as F,mb as N,n as ce,o as E,ra as fe,ub as B,y as O,ya as ve}from"./chunk-QF7ULWVN.js";var Ge="@",We=(()=>{class i{constructor(t,r,n,o,c){this.doc=t,this.delegate=r,this.zone=n,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=T(Se,{optional:!0}),this.loadingSchedulerFn=T(Ke,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-GZPX3KYI.js").then(n=>n),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(n=>{throw new ue(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:o})=>{this._engine=n(this.animationType,this.doc);let c=new o(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(t,r){let n=this.delegate.createRenderer(t,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let o=new ne(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let y=c.createRenderer(t,r);o.use(y),this.scheduler?.notify(10)}).catch(c=>{o.use(n)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){Ee()}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac})}}return i})(),ne=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,n){this.delegate.insertBefore(e,t,r,n)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,n){this.delegate.setAttribute(e,t,r,n)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,n){this.delegate.setStyle(e,t,r,n)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(Ge)}},Ke=new ge("");function Be(i="animations"){return xe("NgAsyncAnimations"),he([{provide:Ce,useFactory:(e,t,r)=>new We(e,t,r,i),deps:[Te,Ae,fe]},{provide:ve,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ue=[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"admin/login",loadComponent:()=>import("./chunk-4QAFRHXQ.js").then(i=>i.AdminLoginComponent)},{path:"admin",children:[{path:"platform-owner",children:[{path:"dashboard",loadComponent:()=>import("./chunk-JK6S4T3W.js").then(i=>i.PlatformDashboardComponent)},{path:"navigation-management",loadComponent:()=>import("./chunk-I7OHM5YV.js").then(i=>i.NavigationManagementComponent)},{path:"restaurant-management",loadComponent:()=>import("./chunk-XESU35AA.js").then(i=>i.RestaurantManagementComponent)},{path:"user-management",loadComponent:()=>import("./chunk-QGOVS6OD.js").then(i=>i.UserManagementComponent)},{path:"notifications",children:[{path:"system-alerts",loadComponent:()=>import("./chunk-U6WZ5TR3.js").then(i=>i.SystemAlertsComponent)},{path:"user-notifications",loadComponent:()=>import("./chunk-GSF6UTCK.js").then(i=>i.UserNotificationsComponent)},{path:"broadcast-message",loadComponent:()=>import("./chunk-4762D57A.js").then(i=>i.BroadcastMessagesComponent)}]},{path:"subscriptions",children:[{path:"plans",loadComponent:()=>import("./chunk-6BNT3QSH.js").then(i=>i.PlanManagementComponent)},{path:"analytics",loadComponent:()=>import("./chunk-2OKY5OKK.js").then(i=>i.SubscriptionAnalyticsComponent)},{path:"features",loadComponent:()=>import("./chunk-3B5NTUQL.js").then(i=>i.FeatureAccessControlComponent)}]},{path:"settings",children:[{path:"system",loadComponent:()=>import("./chunk-OPW622LO.js").then(i=>i.SystemConfigurationComponent)},{path:"security",loadComponent:()=>import("./chunk-52EXD7LB.js").then(i=>i.SecuritySettingsComponent)},{path:"api",loadComponent:()=>import("./chunk-PGA2PRJK.js").then(i=>i.ApiManagementComponent)},{path:"integrations",loadComponent:()=>import("./chunk-PQSFFTXH.js").then(i=>i.IntegrationsComponent)}]}]},{path:"restaurant-owner",children:[{path:"dashboard",loadComponent:()=>import("./chunk-KIJRO34F.js").then(i=>i.OwnerDashboardComponent)},{path:"analytics-reporting",loadComponent:()=>import("./chunk-2QBEEKF3.js").then(i=>i.AnalyticsReportingComponent)},{path:"inventory-management",loadComponent:()=>import("./chunk-5SPYNJRE.js").then(i=>i.InventoryManagementComponent)},{path:"menu-management",loadComponent:()=>import("./chunk-WNEBHSP3.js").then(i=>i.MenuManagementComponent)},{path:"notifications",loadComponent:()=>import("./chunk-LOFTMLTU.js").then(i=>i.NotificationsComponent)},{path:"offers-loyalty",loadComponent:()=>import("./chunk-Q7FMB7VY.js").then(i=>i.OffersLoyaltyComponent)},{path:"order-processing",loadComponent:()=>import("./chunk-FFHCCCCY.js").then(i=>i.OrderProcessingComponent)},{path:"payment-processing",loadComponent:()=>import("./chunk-VB2I4AP7.js").then(i=>i.PaymentProcessingComponent)},{path:"settings-configuration",loadComponent:()=>import("./chunk-BGJCPIXU.js").then(i=>i.SettingsConfigurationComponent)},{path:"shift-reports",loadComponent:()=>import("./chunk-XKENXNDT.js").then(i=>i.ShiftReportsComponent)},{path:"staff-management",loadComponent:()=>import("./chunk-SOH7FFJW.js").then(i=>i.StaffManagementComponent)}]},{path:"restaurant-manager",children:[{path:"dashboard",loadComponent:()=>import("./chunk-3ROI5SPE.js").then(i=>i.RestaurantManagerDashboardComponent)},{path:"analytics-reporting",loadComponent:()=>import("./chunk-2QBEEKF3.js").then(i=>i.AnalyticsReportingComponent)},{path:"inventory-management",loadComponent:()=>import("./chunk-5SPYNJRE.js").then(i=>i.InventoryManagementComponent)},{path:"menu-management",loadComponent:()=>import("./chunk-WNEBHSP3.js").then(i=>i.MenuManagementComponent)},{path:"notifications",loadComponent:()=>import("./chunk-LOFTMLTU.js").then(i=>i.NotificationsComponent)},{path:"offers-loyalty",loadComponent:()=>import("./chunk-Q7FMB7VY.js").then(i=>i.OffersLoyaltyComponent)},{path:"order-processing",loadComponent:()=>import("./chunk-FFHCCCCY.js").then(i=>i.OrderProcessingComponent)},{path:"payment-processing",loadComponent:()=>import("./chunk-VB2I4AP7.js").then(i=>i.PaymentProcessingComponent)},{path:"settings-configuration",loadComponent:()=>import("./chunk-BGJCPIXU.js").then(i=>i.SettingsConfigurationComponent)},{path:"shift-reports",loadComponent:()=>import("./chunk-XKENXNDT.js").then(i=>i.ShiftReportsComponent)},{path:"staff-management",loadComponent:()=>import("./chunk-SOH7FFJW.js").then(i=>i.StaffManagementComponent)}]},{path:"cashier",children:[{path:"dashboard",loadComponent:()=>import("./chunk-K2LPBZ42.js").then(i=>i.CashierDashboardComponent)},{path:"pos",loadComponent:()=>import("./chunk-OHSZLVF3.js").then(i=>i.CashierInterfaceComponent)},{path:"receipt-management",loadComponent:()=>import("./chunk-CQNJEC6Y.js").then(i=>i.ReceiptManagementComponent)},{path:"cash-management",loadComponent:()=>import("./chunk-2WQV3ISC.js").then(i=>i.CashManagementComponent)},{path:"shift-reports",loadComponent:()=>import("./chunk-PT745QSJ.js").then(i=>i.CashierShiftReportsComponent)},{path:"transaction-search",loadComponent:()=>import("./chunk-6CA5OGQ5.js").then(i=>i.TransactionSearchComponent)},{path:"settings",loadComponent:()=>import("./chunk-CJX4R5UC.js").then(i=>i.CashierSettingsComponent)}]},{path:"kitchen-manager",children:[{path:"dashboard",loadComponent:()=>import("./chunk-PSZFXS6L.js").then(i=>i.KitchenDashboardComponent)},{path:"display",loadComponent:()=>import("./chunk-PNYTXEQW.js").then(i=>i.KitchenDisplayComponent)},{path:"recipe-management",loadComponent:()=>import("./chunk-EYBSR5S4.js").then(i=>i.RecipeManagementComponent)},{path:"inventory-management",loadComponent:()=>import("./chunk-TF27XZIR.js").then(i=>i.InventoryManagementComponent)},{path:"analytics-reports",loadComponent:()=>import("./chunk-3PTVWKLH.js").then(i=>i.AnalyticsReportsComponent)}]},{path:"waiter",children:[{path:"dashboard",loadComponent:()=>import("./chunk-G3BIC2PR.js").then(i=>i.WaiterInterfaceComponent)}]}]},{path:"customer/login",loadComponent:()=>import("./chunk-3HJUGURD.js").then(i=>i.CustomerLoginComponent)},{path:"customer",children:[{path:"menu",loadComponent:()=>import("./chunk-FF3JQV3O.js").then(i=>i.CustomerMenuComponent)},{path:"orders",loadComponent:()=>import("./chunk-JGWGQO47.js").then(i=>i.CustomerOrdersComponent)},{path:"offers",loadComponent:()=>import("./chunk-XW2WJMCC.js").then(i=>i.CustomerOffersComponent)},{path:"profile",loadComponent:()=>import("./chunk-UE2D6A22.js").then(i=>i.CustomerProfileComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-MC3NTZOE.js").then(i=>i.CustomerDashboardComponent)},{path:"",redirectTo:"menu",pathMatch:"full"}]},{path:"**",redirectTo:"/admin/login"}];var k=class i{notificationsSubject=new b([]);notifications$=this.notificationsSubject.asObservable();notificationQueue=[];maxNotifications=5;constructor(){}success(e,t,r){return this.show(g({type:"success",title:e,message:t,duration:5e3,icon:"fas fa-check-circle",sound:!1},r))}error(e,t,r){return this.show(g({type:"error",title:e,message:t,duration:7e3,icon:"fas fa-exclamation-triangle",sound:!0},r))}warning(e,t,r){return this.show(g({type:"warning",title:e,message:t,duration:6e3,icon:"fas fa-exclamation-circle",sound:!1},r))}info(e,t,r){return this.show(g({type:"info",title:e,message:t,duration:5e3,icon:"fas fa-info-circle",sound:!1},r))}order(e,t,r){return this.show(g({type:"order",title:e,message:t,duration:0,icon:"fas fa-utensils",sound:!0,persistent:!0},r))}payment(e,t,r){return this.show(g({type:"payment",title:e,message:t,duration:8e3,icon:"fas fa-credit-card",sound:!0},r))}inventory(e,t,r){return this.show(g({type:"inventory",title:e,message:t,duration:1e4,icon:"fas fa-boxes",sound:!0},r))}staff(e,t,r){return this.show(g({type:"staff",title:e,message:t,duration:6e3,icon:"fas fa-users",sound:!1},r))}show(e){let t=this.generateId(),r=g({id:t,timestamp:new Date,duration:5e3,sound:!1,persistent:!1},e);return this.addNotification(r),this.playSoundIfEnabled(r),!r.persistent&&r.duration&&r.duration>0&&O(r.duration).subscribe(()=>{this.removeNotification(t)}),t}removeNotification(e){this.notificationQueue=this.notificationQueue.filter(t=>t.id!==e),this.notificationsSubject.next([...this.notificationQueue])}clearAll(){this.notificationQueue=[],this.notificationsSubject.next([])}clearByType(e){this.notificationQueue=this.notificationQueue.filter(t=>t.type!==e),this.notificationsSubject.next([...this.notificationQueue])}getNotifications(){return[...this.notificationQueue]}getNotificationsByType(e){return this.notificationQueue.filter(t=>t.type===e)}notifyNewOrder(e,t,r){let n="New Order Received",o=`Order #${e} from ${t}${r?` (Table ${r})`:""}`;return this.order(n,o,{action:{label:"View Order",callback:()=>this.navigateToOrder(e)}})}notifyOrderStatusUpdate(e,t,r){let n="Order Status Updated",o=`Order #${e}${r?` for ${r}`:""} is now ${t}`;return this.info(n,o,{action:{label:"View Details",callback:()=>this.navigateToOrder(e)}})}notifyPaymentReceived(e,t,r){let n="Payment Received",o=`\u20B9${t.toLocaleString()} received for Order #${e} via ${r}`;return this.payment(n,o)}notifyLowInventory(e,t,r){let n="Low Inventory Alert",o=`${e} stock is low (${t} remaining, minimum: ${r})`;return this.inventory(n,o,{action:{label:"Manage Inventory",callback:()=>this.navigateToInventory()}})}notifyStaffActivity(e,t,r){let n="Staff Activity",o=`${e} ${t.replace("_"," ")} at ${r}`;return this.staff(n,o)}notifySystemAlert(e,t,r="medium"){let n=r==="high"?"error":r==="medium"?"warning":"info";return this.show({type:n,title:e,message:t,duration:r==="high"?0:1e4,persistent:r==="high",sound:r!=="low"})}addNotification(e){this.notificationQueue.unshift(e),this.notificationQueue.length>this.maxNotifications&&(this.notificationQueue=this.notificationQueue.slice(0,this.maxNotifications)),this.notificationsSubject.next([...this.notificationQueue])}generateId(){return`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}playSoundIfEnabled(e){if(e.sound&&"Audio"in window)try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),n=t.createGain();r.connect(n),n.connect(t.destination),r.frequency.setValueAtTime(800,t.currentTime),r.frequency.setValueAtTime(600,t.currentTime+.1),n.gain.setValueAtTime(.1,t.currentTime),n.gain.exponentialRampToValueAtTime(.001,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)}catch(t){console.warn("Could not play notification sound:",t)}}navigateToOrder(e){console.log("Navigate to order:",e)}navigateToInventory(){console.log("Navigate to inventory")}configure(e){e.maxNotifications&&(this.maxNotifications=e.maxNotifications)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var G=class i{constructor(e,t){this.authService=e;this.notificationService=t}isRefreshing=!1;refreshTokenSubject=new b(null);intercept(e,t){if(this.isAuthEndpoint(e.url)||this.isPublicEndpoint(e.url))return t.handle(e);let r=this.addAuthHeader(e);return t.handle(r).pipe(R(n=>n.status===401&&!e.url.includes("/auth/refresh")?this.handle401Error(e,t):(n.status===403&&this.handle403Error(),E(()=>n))))}addAuthHeader(e){let t=this.getAccessToken();return t?e.clone({setHeaders:{Authorization:`Bearer ${t}`,"X-Requested-With":"XMLHttpRequest","X-Client-Type":"web","X-API-Version":"v1"}}):e}handle401Error(e,t){if(this.isRefreshing)return this.refreshTokenSubject.pipe(le(r=>r!=null),de(1),re(()=>t.handle(this.addAuthHeader(e))));{this.isRefreshing=!0,this.refreshTokenSubject.next(null);let r=this.getRefreshToken();return r?this.refreshAccessToken(r).pipe(re(n=>(this.isRefreshing=!1,this.storeTokens(n),this.refreshTokenSubject.next(n.accessToken),t.handle(this.addAuthHeader(e)))),R(n=>(this.isRefreshing=!1,this.refreshTokenSubject.next(null),this.handleTokenRefreshFailure(),E(()=>n)))):(this.handleTokenRefreshFailure(),E(()=>new Error("No refresh token available")))}}handle403Error(){this.notificationService.error("Access Denied","You do not have permission to perform this action")}handleTokenRefreshFailure(){this.notificationService.error("Session Expired","Your session has expired. Please log in again."),this.authService.logout()}refreshAccessToken(e){let t=new Ie("POST","/api/auth/refresh",{refreshToken:e});return new se(r=>{fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})}).then(n=>n.json()).then(n=>{if(n.success)r.next(n.data);else throw new Error(n.message);r.complete()}).catch(n=>r.error(n))})}storeTokens(e){localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken);let t=Date.now()+e.expiresIn*1e3;localStorage.setItem("tokenExpiry",t.toString())}getAccessToken(){let e=localStorage.getItem("accessToken"),t=localStorage.getItem("tokenExpiry");return e&&t?Date.now()>parseInt(t)?(this.clearTokens(),null):e:null}getRefreshToken(){return localStorage.getItem("refreshToken")}clearTokens(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry")}isAuthEndpoint(e){return["/api/auth/login","/api/auth/register","/api/auth/forgot-password","/api/auth/reset-password","/api/auth/refresh"].some(r=>e.includes(r))}isPublicEndpoint(e){return["/api/public","/api/health","/api/docs","/api/assets"].some(r=>e.includes(r))}static \u0275fac=function(t){return new(t||i)(h(w),h(k))};static \u0275prov=u({token:i,factory:i.\u0275fac})};var A=class i{constructor(e){this.notificationService=e}errorsSubject=new b([]);errors$=this.errorsSubject.asObservable();errorQueue=[];maxErrors=10;handleNetworkError(e,t){let r=this.parseNetworkError(e),n=this.createGlobalError("network",r,t);this.addError(n),this.showNotification(n)}handleValidationError(e,t){let r=this.parseValidationError(e),n=this.createGlobalError("validation",r,t);this.addError(n),this.showNotification(n)}handleBusinessError(e,t,r){let n={code:"BUSINESS_ERROR",message:e,details:t,timestamp:new Date,userMessage:e},o=this.createGlobalError("business",n,r);this.addError(o),this.showNotification(o)}handleSystemError(e,t){let r=this.parseSystemError(e),n=this.createGlobalError("system",r,t);this.addError(n),this.showNotification(n)}handleAuthError(e){let t=this.parseAuthError(e),r=this.createGlobalError("authentication",t);this.addError(r),this.showNotification(r)}handleOrderError(e,t){let r=t?`Order ${t}`:"Order Processing";this.handleBusinessError(`Failed to process order: ${this.extractErrorMessage(e)}`,e,r)}handlePaymentError(e,t){let r=t?`Payment of \u20B9${t}`:"Payment Processing",o={code:"PAYMENT_ERROR",message:`Payment failed: ${this.extractErrorMessage(e)}`,details:e,timestamp:new Date,userMessage:"Payment could not be processed. Please try again or contact support.",actionRequired:!0,actionLabel:"Retry Payment",actionCallback:()=>this.retryPayment()},c=this.createGlobalError("business",o,r);c.retryable=!0,c.retryCallback=o.actionCallback,this.addError(c),this.showNotification(c)}handleInventoryError(e,t){let r=t?`Inventory: ${t}`:"Inventory Management";this.handleBusinessError(`Inventory update failed: ${this.extractErrorMessage(e)}`,e,r)}handleMenuError(e,t){let r=t?`Menu Item: ${t}`:"Menu Management";this.handleBusinessError(`Menu update failed: ${this.extractErrorMessage(e)}`,e,r)}dismissError(e){let t=this.errorQueue.findIndex(r=>r.id===e);t!==-1&&(this.errorQueue[t].dismissed=!0,this.errorsSubject.next([...this.errorQueue]))}clearAllErrors(){this.errorQueue=[],this.errorsSubject.next([])}clearErrorsByType(e){this.errorQueue=this.errorQueue.filter(t=>t.type!==e),this.errorsSubject.next([...this.errorQueue])}getErrors(){return[...this.errorQueue]}getActiveErrors(){return this.errorQueue.filter(e=>!e.dismissed)}retryError(e){let t=this.errorQueue.find(r=>r.id===e);t&&t.retryable&&t.retryCallback&&(t.retryCallback(),this.dismissError(e))}createGlobalError(e,t,r){return{id:this.generateErrorId(),type:e,title:this.getErrorTitle(e,r),message:t.userMessage||t.message,details:t,timestamp:new Date,dismissed:!1}}addError(e){this.errorQueue.unshift(e),this.errorQueue.length>this.maxErrors&&(this.errorQueue=this.errorQueue.slice(0,this.maxErrors)),this.errorsSubject.next([...this.errorQueue])}showNotification(e){let t=this.mapErrorTypeToNotification(e.type);this.notificationService[t](e.title,e.message,{duration:this.getNotificationDuration(e.type),action:e.retryable?{label:"Retry",callback:()=>this.retryError(e.id)}:void 0})}parseNetworkError(e){return{code:e.status?`HTTP_${e.status}`:"NETWORK_ERROR",message:e.message||"Network request failed",details:e,timestamp:new Date,userMessage:"Connection failed. Please check your internet connection and try again."}}parseValidationError(e){let t=this.flattenValidationErrors(e);return{code:"VALIDATION_ERROR",message:"Validation failed",details:e,timestamp:new Date,userMessage:t.join(", ")}}parseSystemError(e){return{code:"SYSTEM_ERROR",message:e.message||"System error occurred",details:e,timestamp:new Date,userMessage:"A system error occurred. Please contact support if this persists."}}parseAuthError(e){return{code:"AUTH_ERROR",message:e.message||"Authentication failed",details:e,timestamp:new Date,userMessage:"Your session has expired. Please log in again.",actionRequired:!0,actionLabel:"Login Again",actionCallback:()=>this.redirectToLogin()}}extractErrorMessage(e){return typeof e=="string"?e:e.message?e.message:e.error&&e.error.message?e.error.message:"Unknown error occurred"}flattenValidationErrors(e){let t=[];return typeof e=="object"&&Object.keys(e).forEach(r=>{Array.isArray(e[r])?t.push(...e[r]):typeof e[r]=="string"&&t.push(e[r])}),t.length>0?t:["Invalid data provided"]}getErrorTitle(e,t){let n={network:"Connection Error",validation:"Validation Error",business:"Business Rule Error",system:"System Error",authentication:"Authentication Error"}[e]||"Error";return t?`${n} - ${t}`:n}mapErrorTypeToNotification(e){switch(e){case"network":case"system":case"authentication":return"error";case"validation":return"warning";case"business":return"info";default:return"error"}}getNotificationDuration(e){switch(e){case"network":case"system":return 1e4;case"authentication":return 0;case"validation":return 7e3;case"business":return 5e3;default:return 5e3}}generateErrorId(){return`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}retryPayment(){console.log("Retrying payment...")}redirectToLogin(){console.log("Redirecting to login...")}configure(e){e.maxErrors&&(this.maxErrors=e.maxErrors)}static \u0275fac=function(t){return new(t||i)(h(k))};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var W=class i{constructor(e,t,r,n){this.authService=e;this.router=t;this.errorHandlingService=r;this.notificationService=n}intercept(e,t){return t.handle(e).pipe(R(r=>this.handleError(r,e)))}applyRetryLogic(e){return e.method!=="GET"||this.shouldNotRetry(e)?t=>t:me({count:2,delay:(t,r)=>this.isRetryableError(t)?(console.warn(`Retrying request (attempt ${r+1}):`,e.url),O(1e3*r)):E(()=>t)})}handleError(e,t){let r=this.getErrorContext(e,t),n=this.parseErrorDetails(e);switch(this.categorizeError(e)){case"network":this.errorHandlingService.handleNetworkError(e,t.url);break;case"authentication":this.errorHandlingService.handleAuthError(e);break;case"business":this.errorHandlingService.handleBusinessError(n.message,n.details,t.url);break;case"validation":this.errorHandlingService.handleValidationError(n.details,t.url);break;default:this.handleGenericError(e,r)}return this.logError(e,t,r),E(()=>e)}categorizeError(e){if(!navigator.onLine||e.status===0)return"network";switch(e.status){case 401:return"authentication";case 403:return"authorization";case 400:return this.isValidationError(e)?"validation":"business";case 404:case 409:case 422:return"business";case 500:case 502:case 503:case 504:return"system";default:return"system"}}parseErrorDetails(e){let t="An unexpected error occurred",r=e,n;return e.error?typeof e.error=="string"?t=e.error:e.error.message?(t=e.error.message,n=e.error.code,r=e.error.details||e.error):e.error.error&&(t=e.error.error,r=e.error):e.message?t=e.message:t=`HTTP ${e.status}: ${e.statusText}`,{message:t,details:r,code:n}}getErrorContext(e,t){let r=t.url.split("/").pop()||"unknown";return`${t.method} ${r}`}handleGenericError(e,t){let r=this.getUserFriendlyMessage(e);this.notificationService.error("Error",r)}getUserFriendlyMessage(e){switch(e.status){case 404:return"The requested resource was not found.";case 408:return"Request timed out. Please try again.";case 429:return"Too many requests. Please wait and try again.";case 500:return"Server error occurred. Please try again later.";case 503:return"Service temporarily unavailable. Please try again later.";default:return"Something went wrong. Please try again."}}isValidationError(e){return e.status===400&&e.error&&(e.error.validationErrors||e.error.fieldErrors||typeof e.error=="object"&&Object.keys(e.error).some(t=>Array.isArray(e.error[t])||typeof e.error[t]=="string"))}isRetryableError(e){return!navigator.onLine||e.status===0||e.status===408||e.status===429||e.status>=500&&e.status<600}shouldNotRetry(e){let r=["/auth/","/login","/register"].some(c=>e.url.includes(c)),n=["POST","PUT","DELETE","PATCH"].includes(e.method),o=e.body instanceof FormData;return r||n||o}logError(e,t,r){let n={timestamp:new Date().toISOString(),context:r,url:t.url,method:t.method,status:e.status,statusText:e.statusText,message:e.message,userAgent:navigator.userAgent,pageUrl:window.location.href};console.error("API Error:",n)}static \u0275fac=function(t){return new(t||i)(h(w),h(H),h(A),h(k))};static \u0275prov=u({token:i,factory:i.\u0275fac})};var K=class i{loadingSubject=new b(!1);loading$=this.loadingSubject.asObservable();constructor(){}show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}get isLoading(){return this.loadingSubject.value}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var J=class i{cache=new Map;config={defaultTtl:5*60*1e3,maxEntries:100,enableCompression:!1,storageType:"memory"};cacheStatsSubject=new b({totalEntries:0,totalHits:0,totalMisses:0,hitRate:0});cacheStats$=this.cacheStatsSubject.asObservable();constructor(){this.loadFromStorage(),this.startCleanupInterval()}get(e,t,r){let n=this.cache.get(e);return n&&!this.isExpired(n)?(n.hits++,n.lastAccessed=Date.now(),this.updateStats(!0),ce(n.data)):(this.updateStats(!1),t?t().pipe(I(o=>this.set(e,o,r)),R(o=>E(()=>o))):E(()=>new Error(`Cache miss for key: ${e} and no fetch function provided`)))}set(e,t,r){let n=Date.now()+(r||this.config.defaultTtl),o={data:t,timestamp:Date.now(),expiry:n,key:e,hits:0,lastAccessed:Date.now()};this.cache.size>=this.config.maxEntries&&this.evictEntries(),this.cache.set(e,o),this.saveToStorage(),this.updateCacheStats()}has(e){let t=this.cache.get(e);return t?!this.isExpired(t):!1}delete(e){let t=this.cache.delete(e);return t&&(this.saveToStorage(),this.updateCacheStats()),t}clear(){this.cache.clear(),this.clearStorage(),this.updateCacheStats()}clearExpired(){let e=Date.now(),t=[];this.cache.forEach((r,n)=>{this.isExpired(r)&&t.push(n)}),t.forEach(r=>this.cache.delete(r)),t.length>0&&(this.saveToStorage(),this.updateCacheStats())}getEntryInfo(e){return this.cache.get(e)||null}getKeys(){return Array.from(this.cache.keys())}getStats(){return this.cacheStatsSubject.value}cacheMenuItems(e,t){let r=`menu_${e}`;this.set(r,t,10*60*1e3)}getCachedMenuItems(e){let t=`menu_${e}`,r=this.cache.get(t);return r&&!this.isExpired(r)?r.data:null}cacheInventory(e,t){let r=`inventory_${e}`;this.set(r,t,2*60*1e3)}getCachedInventory(e){let t=`inventory_${e}`,r=this.cache.get(t);return r&&!this.isExpired(r)?r.data:null}cacheOrders(e,t){let r=`orders_${e}`;this.set(r,t,30*1e3)}getCachedOrders(e){let t=`orders_${e}`,r=this.cache.get(t);return r&&!this.isExpired(r)?r.data:null}cacheUserProfile(e,t){let r=`user_${e}`;this.set(r,t,30*60*1e3)}getCachedUserProfile(e){let t=`user_${e}`,r=this.cache.get(t);return r&&!this.isExpired(r)?r.data:null}invalidateByPattern(e){let t=new RegExp(e),r=[];this.cache.forEach((n,o)=>{t.test(o)&&r.push(o)}),r.forEach(n=>this.cache.delete(n)),r.length>0&&(this.saveToStorage(),this.updateCacheStats())}invalidateMenuCache(e){e?this.invalidateByPattern(`menu_${e}`):this.invalidateByPattern("^menu_")}invalidateInventoryCache(e){e?this.invalidateByPattern(`inventory_${e}`):this.invalidateByPattern("^inventory_")}invalidateOrderCache(e){e?this.invalidateByPattern(`orders_${e}`):this.invalidateByPattern("^orders_")}saveToStorage(){if(this.config.storageType!=="memory")try{let e=Array.from(this.cache.entries()),t=this.getStorage();this.config.enableCompression,t.setItem("app_cache",JSON.stringify(e))}catch(e){console.warn("Failed to save cache to storage:",e)}}loadFromStorage(){if(this.config.storageType!=="memory")try{let t=this.getStorage().getItem("app_cache");t&&JSON.parse(t).forEach(([n,o])=>{this.isExpired(o)||this.cache.set(n,o)})}catch(e){console.warn("Failed to load cache from storage:",e)}}clearStorage(){if(this.config.storageType!=="memory")try{this.getStorage().removeItem("app_cache")}catch(e){console.warn("Failed to clear cache from storage:",e)}}getStorage(){return this.config.storageType==="sessionStorage"?sessionStorage:localStorage}isExpired(e){return Date.now()>e.expiry}evictEntries(){let e="",t=Date.now();this.cache.forEach((r,n)=>{r.lastAccessed<t&&(t=r.lastAccessed,e=n)}),e&&this.cache.delete(e)}updateStats(e){let t=this.cacheStatsSubject.value,r=te(g({},t),{totalHits:e?t.totalHits+1:t.totalHits,totalMisses:e?t.totalMisses:t.totalMisses+1});r.hitRate=r.totalHits/(r.totalHits+r.totalMisses)*100,this.cacheStatsSubject.next(r)}updateCacheStats(){let e=this.cacheStatsSubject.value;this.cacheStatsSubject.next(te(g({},e),{totalEntries:this.cache.size}))}startCleanupInterval(){setInterval(()=>{this.clearExpired()},5*60*1e3)}configure(e){this.config=g(g({},this.config),e),e.storageType&&e.storageType!==this.config.storageType&&this.migrateStorage(e.storageType)}migrateStorage(e){let t=this.config.storageType;if(this.config.storageType=e,t==="memory")this.saveToStorage();else{this.loadFromStorage(),this.saveToStorage();try{(t==="sessionStorage"?sessionStorage:localStorage).removeItem("app_cache")}catch(r){console.warn("Failed to clear old storage:",r)}}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var Y=class i{constructor(e,t){this.loadingService=e;this.cachingService=t}activeRequests=0;requestStartTimes=new Map;intercept(e,t){if(this.shouldSkipLoading(e)||this.isCachedRequest(e)||this.isQuickRequest(e))return t.handle(e);let r=this.generateRequestId();return this.requestStartTimes.set(r,Date.now()),this.activeRequests++,this.loadingService.show(),t.handle(e).pipe(I(n=>{n instanceof z&&this.cacheResponseIfNeeded(e,n)}),pe(()=>{this.activeRequests--,this.requestStartTimes.delete(r),this.activeRequests===0&&this.loadingService.hide()}))}shouldSkipLoading(e){return["/api/notifications","/api/realtime","/api/health","/api/metrics","/api/ping","/api/ws","/api/sse"].some(r=>e.url.includes(r))}isQuickRequest(e){let r=["/api/user/profile","/api/settings","/api/lookup","/api/enums","/api/constants"].some(o=>e.url.includes(o)),n=!e.body||JSON.stringify(e.body).length<1e3;return r||e.method==="GET"&&n}isCachedRequest(e){if(e.method!=="GET"||!["/api/menu","/api/inventory","/api/settings","/api/user/profile"].some(o=>e.url.includes(o)))return!1;let n=this.generateCacheKey(e);return this.cachingService.has(n)}cacheResponseIfNeeded(e,t){if(e.method!=="GET"||t.status!==200||!["/api/menu","/api/inventory","/api/settings"].some(y=>e.url.includes(y)))return;let o=this.generateCacheKey(e),c=this.getCacheTTL(e.url);this.cachingService.set(o,t.body,c)}generateCacheKey(e){let t=e.url.split("?")[0],r=e.params.toString(),n=e.body?this.hashString(JSON.stringify(e.body)):"";return`${e.method}_${t}_${r}_${n}`}getCacheTTL(e){return e.includes("/menu")?10*60*1e3:e.includes("/inventory")?2*60*1e3:e.includes("/settings")?30*60*1e3:5*60*1e3}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}hashString(e){let t=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t.toString()}static \u0275fac=function(t){return new(t||i)(h(K),h(J))};static \u0275prov=u({token:i,factory:i.\u0275fac})};var X=class i{constructor(e){this.errorHandlingService=e}logs=[];maxLogs=1e3;intercept(e,t){let r=Date.now(),n=this.generateRequestId(),o={id:n,timestamp:r,method:e.method,url:e.url,userAgent:navigator.userAgent};return U()&&this.logRequest(e,n),t.handle(e).pipe(I({next:c=>{if(c instanceof z){let y=Date.now()-r;o.duration=y,o.status=c.status,o.size=this.calculateResponseSize(c),this.addLogEntry(o),U()&&this.logResponse(c,n,y),this.logPerformanceMetrics(e,y,c.status)}},error:c=>{let y=Date.now()-r;o.duration=y,o.status=c.status,this.addLogEntry(o),U()&&this.logError(c,n,y),this.logErrorDetails(c,e,y)}}))}logRequest(e,t){console.group(`\u{1F680} HTTP Request [${t}]`),console.log("URL:",e.url),console.log("Method:",e.method),console.log("Headers:",this.formatHeaders(e.headers)),e.body&&!this.isFileUpload(e)?console.log("Body:",this.sanitizeBody(e.body)):this.isFileUpload(e)&&console.log("Body: [File Upload]"),console.groupEnd()}logResponse(e,t,r){let n=this.getStatusColor(e.status),o=this.calculateResponseSize(e);console.group(`\u2705 HTTP Response [${t}] - ${r}ms`),console.log(`Status: %c${e.status} ${e.statusText}`,`color: ${n}`),console.log("URL:",e.url),console.log(`Size: ${this.formatBytes(o)}`),console.log("Headers:",this.formatHeaders(e.headers)),e.body&&!this.isBinaryResponse(e)?console.log("Body:",this.sanitizeBody(e.body)):this.isBinaryResponse(e)&&console.log("Body: [Binary Data]"),console.groupEnd()}logError(e,t,r){console.group(`\u274C HTTP Error [${t}] - ${r}ms`),console.error("Status:",e.status),console.error("Status Text:",e.statusText),console.error("URL:",e.url),console.error("Message:",e.message),e.error&&typeof e.error=="object"?console.error("Error Details:",e.error):console.error("Error:",e.error),console.groupEnd()}logPerformanceMetrics(e,t,r){t>2e3&&console.warn(`\u{1F40C} Slow Request: ${e.method} ${e.url} took ${t}ms`)}logErrorDetails(e,t,r){let n={timestamp:new Date().toISOString(),url:t.url,method:t.method,status:e.status,duration:r,userAgent:navigator.userAgent,error:e.error,message:e.message};console.error("API Error Details:",n),this.errorHandlingService.handleNetworkError(e,t.url)}formatHeaders(e){let t={};return e.keys().forEach(r=>{this.isSensitiveHeader(r)?t[r]="[REDACTED]":t[r]=e.get(r)}),t}sanitizeBody(e){if(!e||this.isFileUpload({body:e}))return e;let t=JSON.parse(JSON.stringify(e)),r=["password","token","secret","key","creditCard","cvv"];return this.removeSensitiveFields(t,r),t}removeSensitiveFields(e,t){!e||typeof e!="object"||Object.keys(e).forEach(r=>{t.includes(r.toLowerCase())?e[r]="[REDACTED]":typeof e[r]=="object"&&this.removeSensitiveFields(e[r],t)})}isSensitiveHeader(e){return["authorization","x-api-key","cookie","x-auth-token","proxy-authorization"].includes(e.toLowerCase())}isFileUpload(e){return e.body instanceof FormData}isBinaryResponse(e){let t=e.headers.get("content-type")||"";return t.includes("application/octet-stream")||t.includes("application/pdf")||t.includes("image/")}calculateResponseSize(e){if(e.body){if(typeof e.body=="string")return e.body.length;if(e.body instanceof ArrayBuffer)return e.body.byteLength;if(typeof e.body=="object")return JSON.stringify(e.body).length}return 0}formatBytes(e){if(e===0)return"0 Bytes";let t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]}getStatusColor(e){return e>=200&&e<300?"green":e>=300&&e<400?"orange":e>=400&&e<500?"red":e>=500?"darkred":"black"}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}addLogEntry(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}getLogs(){return[...this.logs]}getLogsByStatus(e){return this.logs.filter(t=>t.status===e)}getSlowRequests(e=2e3){return this.logs.filter(t=>t.duration&&t.duration>e)}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}static \u0275fac=function(t){return new(t||i)(h(A))};static \u0275prov=u({token:i,factory:i.\u0275fac})};var qe={providers:[Re({eventCoalescing:!0}),je(Ue),Be(),Ne(He()),G,W,Y,X]};function et(i,e){if(i&1){let t=M();a(0,"button",22),S("click",function(){x(t);let n=m().$implicit,o=m(6);return _(o.navigateToMenu(n.path))}),d(1,"i"),p(2),s()}if(i&2){let t=m().$implicit;l(),$(t.icon+" mr-3 w-4 text-center"),l(),N(" ",t.name," ")}}function tt(i,e){if(i&1&&(j(0),v(1,et,3,3,"button",21),L()),i&2){let t=e.$implicit;l(),f("ngIf",t.path)}}function rt(i,e){if(i&1&&(a(0,"div",20),v(1,tt,2,1,"ng-container",12),s()),i&2){let t=m(3).$implicit;l(),f("ngForOf",t.children)}}function it(i,e){if(i&1){let t=M();j(0),a(1,"div",15)(2,"button",16),S("click",function(){x(t);let n=m(2).$implicit,o=m(2);return _(o.toggleSubmenu(n))}),a(3,"div",17),d(4,"i"),p(5),s(),d(6,"i",18),s(),v(7,rt,2,1,"div",19),s(),L()}if(i&2){let t=m(2).$implicit;l(4),$(t.icon+" mr-3 w-4 text-center"),l(),N(" ",t.name," "),l(),ie("rotate-90",t.isActive),l(),f("ngIf",t.isActive)}}function nt(i,e){if(i&1){let t=M();a(0,"a",24),S("click",function(){x(t);let n=m(5);return _(n.closeDropdown())}),d(1,"i"),p(2),s()}if(i&2){let t=m(3).$implicit;f("routerLink",t.path),l(),$(t.icon+" mr-3 w-4 text-center"),l(),N(" ",t.name," ")}}function ot(i,e){if(i&1&&v(0,nt,3,4,"a",23),i&2){let t=m(2).$implicit;f("ngIf",t.path)}}function at(i,e){if(i&1&&(a(0,"div"),v(1,it,8,6,"ng-container",14)(2,ot,1,1,"ng-template",null,0,ke),s()),i&2){let t=we(3),r=m().$implicit;l(),f("ngIf",r.children&&r.children.length>0)("ngIfElse",t)}}function st(i,e){if(i&1&&(j(0),v(1,at,4,2,"div",13),L()),i&2){let t=e.$implicit;l(),f("ngIf",!t.parentId&&t.name!=="Dashboard")}}function ct(i,e){if(i&1){let t=M();a(0,"div",6)(1,"div",7)(2,"a",8),S("click",function(){x(t);let n=m();return _(n.closeDropdown())}),d(3,"i",9),p(4," Dashboard "),s()(),d(5,"div",10),a(6,"div",11),v(7,st,2,1,"ng-container",12),s()()}if(i&2){let t=m();l(2),f("routerLink",t.getDashboardPath()),l(5),f("ngForOf",t.navigationMenus)}}var Z=class i{constructor(e,t,r,n){this.mockDataService=e;this.authService=t;this.router=r;this.route=n}navigationMenus=[];currentUser;isDropdownOpen=!1;onDocumentClick(e){!e.target.closest(".navigation-dropdown")&&this.isDropdownOpen&&this.closeDropdown()}ngOnInit(){this.authService.currentUser$.subscribe(e=>{e?(this.currentUser=e,this.navigationMenus=this.mockDataService.getNavigationMenusByRole(e.role),this.ensureDashboardFirst(),this.updateMenuPathsForAdmin(e.role)):(this.currentUser=void 0,this.navigationMenus=[])})}updateMenuPathsForAdmin(e){if(["platform_owner","restaurant_owner","restaurant_manager","kitchen_manager","cashier","waiter"].includes(e)){let r=e.replace(/_/g,"-");this.navigationMenus.forEach(n=>{n.path&&!n.path.startsWith("/admin")&&(n.path=`/admin/${r}${n.path}`),n.children&&n.children.forEach(o=>{o.path&&!o.path.startsWith("/admin")&&(o.path=`/admin/${r}${o.path}`)})})}}ensureDashboardFirst(){let e=this.navigationMenus.find(t=>t.name==="Dashboard");e&&(this.navigationMenus=this.navigationMenus.filter(t=>t.name!=="Dashboard"),this.navigationMenus.unshift(e))}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}closeDropdown(){this.isDropdownOpen=!1}toggleSubmenu(e){this.navigationMenus.forEach(t=>{t!==e&&(t.isActive=!1)}),e.isActive=!e.isActive}getDashboardPath(){if(this.currentUser){let e=this.currentUser.role;if(["platform_owner","restaurant_owner","restaurant_manager","kitchen_manager","cashier","waiter"].includes(e))return`/admin/${e.replace(/_/g,"-")}/dashboard`;if(e==="customer")return"/customer/dashboard"}return"/admin/login"}navigateToMenu(e){if(e)if(this.closeDropdown(),console.log("Navigating to:",e),e.startsWith("/platform-owner/")||e.startsWith("/restaurant-owner/")||e.startsWith("/restaurant-manager/")||e.startsWith("/kitchen-manager/")||e.startsWith("/cashier/")||e.startsWith("/waiter/")){let t=`/admin${e}`;console.log("Admin navigation path:",t),this.router.navigateByUrl(t).then(r=>{r?console.log("Admin navigation successful to:",t):console.error("Admin navigation failed to:",t)}).catch(r=>{console.error("Admin navigation error:",r)})}else e.startsWith("/customer/")?this.router.navigateByUrl(e).then(t=>{t?console.log("Customer navigation successful to:",e):console.error("Customer navigation failed to:",e)}).catch(t=>{console.error("Customer navigation error:",t)}):this.router.navigateByUrl(e).then(t=>{t?console.log("Navigation successful to:",e):console.error("Navigation failed to:",e)}).catch(t=>{console.error("Navigation error:",t)})}static \u0275fac=function(t){return new(t||i)(D(Le),D(w),D(H),D(Oe))};static \u0275cmp=P({type:i,selectors:[["app-navigation-menu"]],hostBindings:function(t,r){t&1&&S("click",function(o){return r.onDocumentClick(o)},!1,be)},standalone:!0,features:[B],decls:6,vars:3,consts:[["singleMenu",""],[1,"relative","inline-block","navigation-dropdown"],["type","button",1,"inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-lg","hover:bg-gray-50","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","transition-all","duration-200","shadow-sm",3,"click"],[1,"fas","fa-bars","mr-2"],[1,"fas","fa-chevron-down","ml-2","text-xs","transition-transform","duration-200"],["class","absolute right-0 z-50 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto",4,"ngIf"],[1,"absolute","right-0","z-50","mt-2","w-80","bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","border","border-gray-200","dark:border-gray-700","max-h-96","overflow-y-auto"],[1,"p-2"],[1,"flex","items-center","px-3","py-2","text-sm","font-medium","text-primary-600","dark:text-primary-400","bg-primary-50","dark:bg-primary-900/20","rounded-md","hover:bg-primary-100","dark:hover:bg-primary-900/30","transition-colors","duration-150",3,"click","routerLink"],[1,"fas","fa-tachometer-alt","mr-3","w-4","text-center"],[1,"border-t","border-gray-200","dark:border-gray-700"],[1,"p-2","space-y-1"],[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"relative"],[1,"w-full","flex","items-center","justify-between","px-3","py-2","text-sm","text-gray-700","dark:text-gray-200","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-150",3,"click"],[1,"flex","items-center"],[1,"fas","fa-chevron-right","text-xs","transition-transform","duration-200"],["class","ml-4 mt-1 space-y-1",4,"ngIf"],[1,"ml-4","mt-1","space-y-1"],["class","w-full text-left flex items-center px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-150 pl-6 relative before:content-[''] before:absolute before:left-3 before:top-1/2 before:w-2 before:h-px before:bg-gray-400 dark:before:bg-gray-500",3,"click",4,"ngIf"],[1,"w-full","text-left","flex","items-center","px-3","py-2","text-sm","text-gray-600","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-150","pl-6","relative","before:content-['']","before:absolute","before:left-3","before:top-1/2","before:w-2","before:h-px","before:bg-gray-400","dark:before:bg-gray-500",3,"click"],["class","flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-150",3,"routerLink","click",4,"ngIf"],[1,"flex","items-center","px-3","py-2","text-sm","text-gray-700","dark:text-gray-200","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","transition-colors","duration-150",3,"click","routerLink"]],template:function(t,r){t&1&&(a(0,"div",1)(1,"button",2),S("click",function(){return r.toggleDropdown()}),d(2,"i",3),p(3," Navigation "),d(4,"i",4),s(),v(5,ct,8,2,"div",5),s()),t&2&&(l(4),ie("rotate-180",r.isDropdownOpen),l(),f("ngIf",r.isDropdownOpen))},dependencies:[Q,Me,V,q,$e],styles:[".navigation-dropdown[_ngcontent-%COMP%]{position:relative}"]})};function lt(i,e){if(i&1){let t=M();a(0,"header",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),d(6,"i",9),s(),a(7,"div")(8,"h1",10),p(9,"CafeX POS"),s(),a(10,"p",11),p(11,"Multi-Tenant SaaS System"),s()()()(),a(12,"div",12),d(13,"app-navigation-menu"),s(),a(14,"div",6)(15,"div",13),d(16,"i",14),a(17,"span"),p(18),s()(),a(19,"button",15),S("click",function(){x(t);let n=m();return _(n.toggleTheme())}),d(20,"i",16)(21,"i",17),s(),a(22,"button",18),d(23,"i",19)(24,"span",20),s(),a(25,"div",21)(26,"div",22)(27,"p",23),p(28),s(),a(29,"p",24),p(30),s()(),a(31,"div",25),d(32,"img",26)(33,"div",27),s(),a(34,"button",28),S("click",function(){x(t);let n=m();return _(n.logout())}),d(35,"i",29),s()()()()()()}if(i&2){let t=m();l(18),F(t.currentDateTime),l(10),F((t.currentUser==null?null:t.currentUser.name)||"User"),l(2),F((t.currentUser==null||t.currentUser.role==null?null:t.currentUser.role.replace("_"," "))||"Role"),l(2),f("src",(t.currentUser==null?null:t.currentUser.avatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",ye)}}function dt(i,e){if(i&1&&(a(0,"footer",30)(1,"div",4)(2,"div",31)(3,"div",32)(4,"span"),p(5,"\xA9 2025 CafeX POS v1.0.0"),s(),a(6,"span",33),p(7,"|"),s(),a(8,"span"),p(9,"System Status: "),a(10,"span",34),p(11,"Online"),s()(),a(12,"span",33),p(13,"|"),s(),a(14,"span"),p(15),s()(),a(16,"div",6)(17,"button",35),d(18,"i",36),p(19,"Help "),s(),a(20,"button",35),d(21,"i",37),p(22,"Settings "),s(),a(23,"button",35),d(24,"i",38),p(25,"Security "),s()()()()()),i&2){let t=m();l(15),N("Last Backup: ",t.lastBackupTime,"")}}var ee=class i{title="cafe-x-pos";currentUser=null;notificationPermission="default";showNotificationPrompt=!1;isLoggedIn=!1;currentDateTime="";lastBackupTime="2 hours ago";realtimeService=T(Fe);authService=T(w);router=T(H);ngOnInit(){let e=localStorage.getItem("theme");(e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark"),this.checkNotificationPermission(),this.setupRealtimeSubscriptions(),this.authService.currentUser$.subscribe(t=>{t?(this.currentUser={id:t.id,name:t.name,email:"",role:t.role,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"},this.isLoggedIn=!0):(this.currentUser=null,this.isLoggedIn=!1)}),this.updateDateTime(),setInterval(()=>this.updateDateTime(),1e3),this.initializeAuthState()}initializeAuthState(){let e=this.authService.getCurrentUser();e?(this.isLoggedIn=!0,this.currentUser={id:e.id,name:e.name,email:"",role:e.role,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"}):(this.isLoggedIn=!1,this.currentUser=null)}updateDateTime(){let e=new Date;this.currentDateTime=e.toLocaleString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}checkNotificationPermission(){"Notification"in window&&(this.notificationPermission=Notification.permission,Notification.permission==="default"&&setTimeout(()=>{this.showNotificationPrompt=!0},3e3))}setupRealtimeSubscriptions(){this.realtimeService.newOrder$.subscribe(e=>{e&&console.log("New order received:",e)}),this.realtimeService.orderUpdate$.subscribe(e=>{e&&console.log("Order updated:",e)}),this.realtimeService.newNotification$.subscribe(e=>{e&&console.log("New notification:",e)})}toggleTheme(){let e=document.documentElement;e.classList.contains("dark")?(e.classList.remove("dark"),localStorage.setItem("theme","light")):(e.classList.add("dark"),localStorage.setItem("theme","dark"))}requestNotificationPermission(){return ae(this,null,function*(){try{this.notificationPermission=yield this.realtimeService.requestNotificationPermissionManually(),this.showNotificationPrompt=!1}catch(e){console.warn("Error requesting notification permission:",e)}})}dismissNotificationPrompt(){this.showNotificationPrompt=!1}triggerTestOrder(){this.realtimeService.triggerTestOrder()}triggerTestNotification(){this.realtimeService.triggerTestNotification()}login(){this.currentUser={id:"1",name:"Demo User",email:"demo@cafex.com",role:"platform_owner"}}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=P({type:i,selectors:[["app-root"]],standalone:!0,features:[B],decls:4,vars:8,consts:[["class","fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gradient-to-r dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-900 dark:text-white shadow-lg border-b border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"flex-1","overflow-y-auto"],["class","fixed bottom-0 left-0 right-0 z-40 bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"fixed","top-0","left-0","right-0","z-50","bg-white","dark:bg-gradient-to-r","dark:from-gray-900","dark:via-gray-800","dark:to-gray-900","text-gray-900","dark:text-white","shadow-lg","border-b","border-gray-200","dark:border-gray-700"],[1,"px-4","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-gradient-to-br","from-red-500","to-red-600","rounded-lg","flex","items-center","justify-center","shadow-lg"],[1,"fas","fa-coffee","text-white","text-lg"],[1,"text-xl","font-bold","tracking-wide"],[1,"text-xs","text-gray-500","dark:text-gray-500"],[1,"flex-1","flex","justify-end","mr-4"],[1,"hidden","md:flex","items-center","space-x-2","text-sm","text-gray-600","dark:text-gray-400"],[1,"fas","fa-clock"],["title","Toggle Theme",1,"p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors",3,"click"],[1,"fas","fa-moon","text-gray-600","dark:text-gray-400","dark:hidden"],[1,"fas","fa-sun","text-yellow-400","hidden","dark:inline"],[1,"relative","p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors"],[1,"fas","fa-bell","text-gray-600","dark:text-gray-400"],[1,"absolute","-top-1","-right-1","w-3","h-3","bg-red-500","rounded-full"],[1,"flex","items-center","space-x-3","border-l","border-gray-300","dark:border-gray-600","pl-4"],[1,"text-right"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"relative"],["alt","Profile",1,"w-10","h-10","rounded-full","border-2","border-gray-300","dark:border-gray-500",3,"src"],[1,"absolute","-bottom-1","-right-1","w-4","h-4","bg-green-500","border-2","border-white","dark:border-gray-900","rounded-full"],["title","Logout",1,"p-2","rounded-lg","bg-gray-100","dark:bg-gray-700","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors",3,"click"],[1,"fas","fa-sign-out-alt","text-gray-600","dark:text-gray-400"],[1,"fixed","bottom-0","left-0","right-0","z-40","bg-gray-50","dark:bg-gray-900","text-gray-600","dark:text-gray-400","border-t","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between","text-sm"],[1,"flex","items-center","space-x-6"],[1,"text-gray-400","dark:text-gray-600"],[1,"text-green-600","dark:text-green-400"],[1,"hover:text-gray-900","dark:hover:text-white","transition-colors"],[1,"fas","fa-question-circle","mr-1"],[1,"fas","fa-cog","mr-1"],[1,"fas","fa-shield-alt","mr-1"]],template:function(t,r){t&1&&(v(0,lt,36,4,"header",0),a(1,"main",1),d(2,"router-outlet"),s(),v(3,dt,26,1,"footer",2)),t&2&&(f("ngIf",r.isLoggedIn),l(),_e("height",r.isLoggedIn?"calc(100vh - 140px)":"100vh","px")("padding-top",r.isLoggedIn?68:0,"px")("padding-bottom",r.isLoggedIn?44:0,"px"),l(2),f("ngIf",r.isLoggedIn))},dependencies:[Q,V,q,Pe,Z],styles:["button[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], [role=button][_ngcontent-%COMP%], input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{transition:all .2s ease}button[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.card[_ngcontent-%COMP%], .bg-white[_ngcontent-%COMP%], .bg-gray-800[_ngcontent-%COMP%]{transition:all .2s ease}.card[_ngcontent-%COMP%]:hover, .bg-gray-800[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}"]})};De(ee,qe).catch(i=>console.error(i));
