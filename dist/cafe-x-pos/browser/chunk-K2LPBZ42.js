import{a as N}from"./chunk-WUE66JDZ.js";import{q as R}from"./chunk-B5JX3SSM.js";import{a as M}from"./chunk-7C3C72CK.js";import{l as D,m as I,n as O,q as _}from"./chunk-D6F33BNN.js";import{$a as l,Ea as o,Fa as x,Sa as b,Va as m,Ya as u,Za as e,_a as t,ba as v,cb as w,fb as k,gb as f,ka as y,kb as r,la as S,lb as d,mb as c,nb as h,ub as C,yb as E,zb as T}from"./chunk-QF7ULWVN.js";function F(s,a){if(s&1){let i=w();e(0,"button",53),k("click",function(){let g=y(i).$implicit,p=f();return S(p.executeQuickAction(g.action))}),l(1,"i",54),e(2,"span",55),r(3),t()()}if(s&2){let i=a.$implicit;u(i.color),o(),u(i.icon),o(2),d(i.name)}}function P(s,a){if(s&1&&(e(0,"div",56)(1,"div",5)(2,"div",57),l(3,"i",4),t(),e(4,"div")(5,"p",58),r(6),t(),e(7,"p",59),r(8),t()()(),e(9,"div",6)(10,"p",60),r(11),t(),e(12,"p",61),r(13),E(14,"titlecase"),t()()()),s&2){let i=a.$implicit,n=f();o(3),u(n.getPaymentMethodIcon(i.paymentMethod)),o(3),d(i.customerName),o(2),h("",i.orderId," \u2022 ",n.formatTime(i.timestamp),""),o(3),d(n.formatCurrency(i.amount)),o(),u(n.getTransactionStatusColor(i.status)),o(),c(" ",T(14,9,i.status)," ")}}function j(s,a){s&1&&(e(0,"div",62),l(1,"i",63),e(2,"p"),r(3,"No recent transactions"),t()())}function H(s,a){if(s&1&&(e(0,"div",64)(1,"div",5)(2,"div",65),l(3,"i",66),t(),e(4,"div")(5,"p",58),r(6),t(),e(7,"p",59),r(8),t()()(),e(9,"div",6)(10,"p",67),r(11),t(),e(12,"p",59),r(13),t()()()),s&2){let i=a.$implicit,n=f();o(6),c("#",i.id.split("-").pop(),""),o(2),h("",i.customerName," \u2022 Table ",i.tableNumber,""),o(3),d(n.formatCurrency(i.totalAmount)),o(2),c("",i.items.length," items")}}function A(s,a){s&1&&(e(0,"div",62),l(1,"i",68),e(2,"p"),r(3,"No pending bills"),t()())}var B=class s{constructor(a,i){this.mockDataService=a;this.realtimeService=i}subscriptions=[];currentUser=null;stats={todaysSales:0,pendingBills:0,activeTables:0,shiftHours:0,transactionsToday:0,avgTransactionValue:0};quickActions=[{id:"new-bill",name:"New Bill",icon:"fas fa-plus",color:"bg-blue-500 hover:bg-blue-600",action:"newBill"},{id:"search-order",name:"Find Order",icon:"fas fa-search",color:"bg-green-500 hover:bg-green-600",action:"searchOrder"},{id:"split-bill",name:"Split Bill",icon:"fas fa-code-branch",color:"bg-purple-500 hover:bg-purple-600",action:"splitBill"},{id:"cash-drawer",name:"Cash Drawer",icon:"fas fa-cash-register",color:"bg-yellow-500 hover:bg-yellow-600",action:"openCashDrawer"},{id:"shift-report",name:"Shift Report",icon:"fas fa-file-alt",color:"bg-red-500 hover:bg-red-600",action:"shiftReport"},{id:"manager-override",name:"Manager Override",icon:"fas fa-user-shield",color:"bg-indigo-500 hover:bg-indigo-600",action:"managerOverride"}];recentTransactions=[];pendingOrders=[];ngOnInit(){this.initializeData(),this.setupRealtimeSubscriptions(),this.calculateStats()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}initializeData(){this.currentUser=this.mockDataService.getUserByRole("cashier")||null,this.loadRecentTransactions(),this.loadPendingOrders()}setupRealtimeSubscriptions(){let a=this.realtimeService.newOrder$.subscribe(n=>{n&&(this.loadPendingOrders(),this.calculateStats())});this.subscriptions.push(a);let i=this.realtimeService.orderUpdate$.subscribe(n=>{n&&(this.loadPendingOrders(),this.calculateStats())});this.subscriptions.push(i)}loadRecentTransactions(){this.recentTransactions=[{id:"txn-1",orderId:"ORD-2025-1045",customerName:"Amit Patil",amount:483,paymentMethod:"UPI",timestamp:new Date(Date.now()-5*60*1e3),status:"success"},{id:"txn-2",orderId:"ORD-2025-1044",customerName:"Sarah Johnson",amount:250,paymentMethod:"Card",timestamp:new Date(Date.now()-15*60*1e3),status:"success"},{id:"txn-3",orderId:"ORD-2025-1043",customerName:"Raj Kumar",amount:380,paymentMethod:"Cash",timestamp:new Date(Date.now()-30*60*1e3),status:"success"}]}loadPendingOrders(){this.mockDataService.getOrders().subscribe(a=>{this.pendingOrders=a.filter(i=>i.status==="ready"&&i.paymentStatus==="pending"),this.calculateStats()})}calculateStats(){let a=new Date;a.setHours(0,0,0,0);let i=0,n=0;this.recentTransactions.forEach(g=>{let p=new Date(g.timestamp);p.setHours(0,0,0,0),p.getTime()===a.getTime()&&g.status==="success"&&(i++,n+=g.amount)}),this.stats={todaysSales:n,pendingBills:this.pendingOrders.length,activeTables:12,shiftHours:6.5,transactionsToday:i,avgTransactionValue:i>0?n/i:0}}executeQuickAction(a){switch(a){case"newBill":this.newBill();break;case"searchOrder":this.searchOrder();break;case"splitBill":this.splitBill();break;case"openCashDrawer":this.openCashDrawer();break;case"shiftReport":this.shiftReport();break;case"managerOverride":this.managerOverride();break}}newBill(){console.log("Creating new bill...")}searchOrder(){console.log("Opening order search...")}splitBill(){console.log("Opening bill splitting...")}openCashDrawer(){console.log("Opening cash drawer...")}shiftReport(){console.log("Generating shift report...")}managerOverride(){console.log("Opening manager override...")}formatCurrency(a){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a)}formatTime(a){return new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(a)}getCurrentTime(){return new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date)}getTransactionStatusColor(a){switch(a){case"success":return"text-green-600";case"failed":return"text-red-600";case"pending":return"text-yellow-600";default:return"text-gray-600"}}getPaymentMethodIcon(a){switch(a.toLowerCase()){case"cash":return"fas fa-money-bill-wave";case"card":return"fas fa-credit-card";case"upi":return"fas fa-mobile-alt";case"wallet":return"fas fa-wallet";default:return"fas fa-question-circle"}}getSalesPerHour(){return Math.round(this.stats.todaysSales/Math.max(this.stats.shiftHours,1)).toLocaleString("en-IN")}static \u0275fac=function(i){return new(i||s)(x(M),x(N))};static \u0275cmp=v({type:s,selectors:[["app-cashier-dashboard"]],standalone:!0,features:[C],decls:103,vars:16,consts:[[1,"p-6"],[1,"mb-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-3"],[1,"text-right"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-lg","font-bold","text-gray-900","dark:text-white"],[1,"w-12","h-12","bg-gradient-to-br","from-green-500","to-green-700","rounded-xl","flex","items-center","justify-center"],[1,"fas","fa-cash-register","text-white","text-xl"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-gradient-to-br","from-blue-50","to-blue-100","dark:from-blue-900/20","dark:to-blue-800/20","rounded-2xl","p-6","border","border-blue-200","dark:border-blue-800"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-12","h-12","rounded-xl","bg-blue-500","flex","items-center","justify-center"],[1,"fas","fa-indian-rupee-sign","text-white"],[1,"text-blue-600","dark:text-blue-400","text-sm","font-medium"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-1"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"bg-gradient-to-br","from-orange-50","to-orange-100","dark:from-orange-900/20","dark:to-orange-800/20","rounded-2xl","p-6","border","border-orange-200","dark:border-orange-800"],[1,"w-12","h-12","rounded-xl","bg-orange-500","flex","items-center","justify-center"],[1,"fas","fa-clock","text-white"],[1,"text-orange-600","dark:text-orange-400","text-sm","font-medium"],[1,"bg-gradient-to-br","from-green-50","to-green-100","dark:from-green-900/20","dark:to-green-800/20","rounded-2xl","p-6","border","border-green-200","dark:border-green-800"],[1,"w-12","h-12","rounded-xl","bg-green-500","flex","items-center","justify-center"],[1,"fas","fa-table","text-white"],[1,"text-green-600","dark:text-green-400","text-sm","font-medium"],[1,"bg-gradient-to-br","from-purple-50","to-purple-100","dark:from-purple-900/20","dark:to-purple-800/20","rounded-2xl","p-6","border","border-purple-200","dark:border-purple-800"],[1,"w-12","h-12","rounded-xl","bg-purple-500","flex","items-center","justify-center"],[1,"fas","fa-business-time","text-white"],[1,"text-purple-600","dark:text-purple-400","text-sm","font-medium"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6","mb-8"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","mb-4","flex","items-center"],[1,"fas","fa-bolt","mr-3","text-yellow-500"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],["class","p-4 rounded-xl text-white font-semibold transition-all duration-200 hover:scale-105 hover:shadow-lg flex flex-col items-center space-y-2",3,"class","click",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6"],[1,"text-primary-500","text-sm","hover:text-primary-600"],[1,"fas","fa-external-link-alt","mr-1"],[1,"space-y-3"],["class","flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-orange-100","dark:bg-orange-900/30","text-orange-600"],[1,"space-y-3","max-h-80","overflow-y-auto"],["class","flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg p-2 transition-colors",4,"ngFor","ngForOf"],[1,"mt-6","bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","border","border-gray-200","dark:border-gray-700","p-6"],[1,"fas","fa-chart-line","mr-3","text-green-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center"],[1,"text-2xl","font-bold","text-blue-600","mb-1"],[1,"text-2xl","font-bold","text-green-600","mb-1"],[1,"text-2xl","font-bold","text-purple-600","mb-1"],[1,"p-4","rounded-xl","text-white","font-semibold","transition-all","duration-200","hover:scale-105","hover:shadow-lg","flex","flex-col","items-center","space-y-2",3,"click"],[1,"text-2xl"],[1,"text-sm","text-center"],[1,"flex","items-center","justify-between","py-3","border-b","border-gray-100","dark:border-gray-700","last:border-b-0"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","bg-gray-100","dark:bg-gray-700"],[1,"font-medium","text-gray-900","dark:text-white","text-sm"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"text-xs"],[1,"text-center","py-8","text-gray-500","dark:text-gray-400"],[1,"fas","fa-receipt","text-3xl","mb-2"],[1,"flex","items-center","justify-between","py-3","border-b","border-gray-100","dark:border-gray-700","last:border-b-0","cursor-pointer","hover:bg-gray-50","dark:hover:bg-gray-700","rounded-lg","p-2","transition-colors"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","bg-blue-100","dark:bg-blue-900/30"],[1,"fas","fa-utensils","text-blue-600","dark:text-blue-400"],[1,"font-semibold","text-green-600"],[1,"fas","fa-check-circle","text-3xl","mb-2"]],template:function(i,n){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"Cashier Dashboard"),t(),e(6,"p",4),r(7),t()(),e(8,"div",5)(9,"div",6)(10,"div",7),r(11,"Current Time"),t(),e(12,"div",8),r(13),t()(),e(14,"div",9),l(15,"i",10),t()()()(),e(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14),l(20,"i",15),t(),e(21,"span",16),r(22,"Today's Sales"),t()(),e(23,"div",17),r(24),t(),e(25,"div",18),r(26),t()(),e(27,"div",19)(28,"div",13)(29,"div",20),l(30,"i",21),t(),e(31,"span",22),r(32,"Pending Bills"),t()(),e(33,"div",17),r(34),t(),e(35,"div",18),r(36,"Ready for payment"),t()(),e(37,"div",23)(38,"div",13)(39,"div",24),l(40,"i",25),t(),e(41,"span",26),r(42,"Active Tables"),t()(),e(43,"div",17),r(44),t(),e(45,"div",18),r(46,"Currently occupied"),t()(),e(47,"div",27)(48,"div",13)(49,"div",28),l(50,"i",29),t(),e(51,"span",30),r(52,"Shift Hours"),t()(),e(53,"div",17),r(54),t(),e(55,"div",18),r(56,"Current shift"),t()()(),e(57,"div",31)(58,"h3",32),l(59,"i",33),r(60,"Quick Actions "),t(),e(61,"div",34),b(62,F,4,5,"button",35),t()(),e(63,"div",36)(64,"div",37)(65,"div",13)(66,"h3",8),r(67,"Recent Transactions"),t(),e(68,"button",38),l(69,"i",39),r(70,"View All "),t()(),e(71,"div",40),b(72,P,15,11,"div",41)(73,j,4,0,"div",42),t()(),e(74,"div",37)(75,"div",13)(76,"h3",8),r(77,"Pending Bills"),t(),e(78,"span",43),r(79),t()(),e(80,"div",44),b(81,H,14,5,"div",45)(82,A,4,0,"div",42),t()()(),e(83,"div",46)(84,"h3",32),l(85,"i",47),r(86,"Today's Performance "),t(),e(87,"div",48)(88,"div",49)(89,"div",50),r(90),t(),e(91,"div",18),r(92,"Total Transactions"),t()(),e(93,"div",49)(94,"div",51),r(95),t(),e(96,"div",18),r(97,"Average Transaction"),t()(),e(98,"div",49)(99,"div",52),r(100),t(),e(101,"div",18),r(102,"Sales per Hour"),t()()()()()),i&2&&(o(7),c("Welcome back, ",n.currentUser==null?null:n.currentUser.name," \u2022 Shift Overview"),o(6),d(n.getCurrentTime()),o(11),d(n.formatCurrency(n.stats.todaysSales)),o(2),c("",n.stats.transactionsToday," transactions"),o(8),d(n.stats.pendingBills),o(10),d(n.stats.activeTables),o(10),c("",n.stats.shiftHours,"h"),o(8),m("ngForOf",n.quickActions),o(10),m("ngForOf",n.recentTransactions.slice(0,5)),o(),m("ngIf",n.recentTransactions.length===0),o(6),c(" ",n.pendingOrders.length," bills "),o(2),m("ngForOf",n.pendingOrders.slice(0,5)),o(),m("ngIf",n.pendingOrders.length===0),o(8),d(n.stats.transactionsToday),o(5),d(n.formatCurrency(n.stats.avgTransactionValue)),o(5),c("\u20B9",n.getSalesPerHour(),""))},dependencies:[_,D,I,O,R]})};export{B as CashierDashboardComponent};
