import{i as a}from"./chunk-7XBOO3UA.js";import{a as c}from"./chunk-7C3C72CK.js";import{T as u,Y as n,k as o}from"./chunk-QF7ULWVN.js";var l=class s{constructor(r,t){this.router=r;this.mockDataService=t;this.mockDataService.getUsers().subscribe(e=>{this.users=e})}currentUserSubject=new o(null);currentUser$=this.currentUserSubject.asObservable();currentUser=null;users=[];login(r,t){let e=this.users.find(i=>i.username===r&&i.password===t);return e?(this.currentUser=e,localStorage.setItem("currentUser",JSON.stringify(e)),this.currentUserSubject.next(e),!0):!1}logout(){this.currentUser=null,localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.router.url.startsWith("/admin")?this.router.navigate(["/admin/login"]):this.router.navigate(["/customer/login"])}getCurrentUser(){if(!this.currentUser){let r=localStorage.getItem("currentUser");r&&(this.currentUser=JSON.parse(r),this.currentUserSubject.next(this.currentUser))}return this.currentUser}isLoggedIn(){return this.getCurrentUser()!==null}getUserRole(){let r=this.getCurrentUser();return r?r.role:null}getDummyCredentials(){return this.users.map(r=>({role:r.role,username:r.username,password:r.password}))}static \u0275fac=function(t){return new(t||s)(n(a),n(c))};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{l as a};
