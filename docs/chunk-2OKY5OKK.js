import{a as d,b as E}from"./chunk-IE4XZJUC.js";import{q as S}from"./chunk-B5JX3SSM.js";import{l as f,q as y}from"./chunk-D6F33BNN.js";import{$a as s,Ea as l,Sa as p,Va as v,Ya as g,Za as e,_a as t,ba as b,fb as c,gb as x,kb as n,lb as o,mb as u,ub as h}from"./chunk-QF7ULWVN.js";function w(m,a){if(m&1&&(e(0,"tr",42)(1,"td",43)(2,"div",44)(3,"div",45),s(4,"i",46),t(),e(5,"span",47),n(6),t()()(),e(7,"td",48),n(8),t(),e(9,"td",49),n(10),t(),e(11,"td",43)(12,"span",50),n(13),t()(),e(14,"td",43)(15,"span",51),n(16),t()(),e(17,"td",48),n(18),t()()),m&2){let r=a.$implicit,i=x();l(6),o(r.planName),l(2),o(r.subscriberCount),l(2),o(i.formatCurrency(r.revenue)),l(2),g(r.churnRate>10?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":r.churnRate>5?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"),l(),u(" ",i.formatPercentage(r.churnRate)," "),l(3),u(" +",i.formatPercentage(r.growthRate)," "),l(2),u("",r.averageTenure," months")}}d.register(...E);var R=class m{metrics={totalRevenue:154195,monthlyRecurringRevenue:44555,annualRecurringRevenue:109640,totalSubscribers:81,activeSubscribers:73,churnRate:8.5,averageRevenuePerUser:1901,lifetimeValue:22812,conversionRate:67.3};planAnalytics=[{planId:"starter",planName:"Starter Plan",subscriberCount:45,revenue:44555,churnRate:12.5,growthRate:8.2,averageTenure:8.5},{planId:"professional",planName:"Professional Plan",subscriberCount:28,revenue:69720,churnRate:5.2,growthRate:15.8,averageTenure:12.3},{planId:"enterprise",planName:"Enterprise Plan",subscriberCount:8,revenue:39920,churnRate:2.1,growthRate:22.4,averageTenure:18.7}];revenueData=[{month:"Jan",revenue:32e3,newSubscribers:8,churnedSubscribers:2,planBreakdown:{starter:8e3,professional:16e3,enterprise:8e3}},{month:"Feb",revenue:35e3,newSubscribers:12,churnedSubscribers:3,planBreakdown:{starter:1e4,professional:18e3,enterprise:7e3}},{month:"Mar",revenue:38e3,newSubscribers:15,churnedSubscribers:4,planBreakdown:{starter:12e3,professional:2e4,enterprise:6e3}},{month:"Apr",revenue:42e3,newSubscribers:18,churnedSubscribers:3,planBreakdown:{starter:14e3,professional:22e3,enterprise:6e3}},{month:"May",revenue:45e3,newSubscribers:20,churnedSubscribers:5,planBreakdown:{starter:15e3,professional:24e3,enterprise:6e3}},{month:"Jun",revenue:45600,newSubscribers:8,churnedSubscribers:2,planBreakdown:{starter:15600,professional:24e3,enterprise:6e3}}];selectedTimeframe="6months";selectedMetric="revenue";constructor(){}ngOnInit(){}ngAfterViewInit(){this.initCharts()}initCharts(){this.initRevenueChart(),this.initSubscriberChart(),this.initPlanDistributionChart(),this.initChurnChart()}initRevenueChart(){let a=document.getElementById("revenueChart");a&&new d(a,{type:"line",data:{labels:this.revenueData.map(r=>r.month),datasets:[{label:"Monthly Revenue",data:this.revenueData.map(r=>r.revenue),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(r){return"\u20B9"+r.toLocaleString()}}}}}})}initSubscriberChart(){let a=document.getElementById("subscriberChart");a&&new d(a,{type:"bar",data:{labels:this.revenueData.map(r=>r.month),datasets:[{label:"New Subscribers",data:this.revenueData.map(r=>r.newSubscribers),backgroundColor:"#10b981",borderRadius:4},{label:"Churned Subscribers",data:this.revenueData.map(r=>r.churnedSubscribers),backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})}initPlanDistributionChart(){let a=document.getElementById("planDistributionChart");a&&new d(a,{type:"doughnut",data:{labels:this.planAnalytics.map(r=>r.planName),datasets:[{data:this.planAnalytics.map(r=>r.subscriberCount),backgroundColor:["#10b981","#f59e0b","#8b5cf6"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})}initChurnChart(){let a=document.getElementById("churnChart");a&&new d(a,{type:"line",data:{labels:this.planAnalytics.map(r=>r.planName),datasets:[{label:"Churn Rate (%)",data:this.planAnalytics.map(r=>r.churnRate),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(r){return r+"%"}}}}}})}formatCurrency(a){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a)}formatPercentage(a){return a.toFixed(1)+"%"}exportData(){console.log("Exporting subscription analytics data...")}refreshData(){console.log("Refreshing subscription analytics...")}static \u0275fac=function(r){return new(r||m)};static \u0275cmp=b({type:m,selectors:[["app-subscription-analytics"]],standalone:!0,features:[h],decls:130,vars:9,consts:[[1,"p-6"],[1,"mb-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300"],[1,"flex","space-x-3"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","space-x-2",3,"click"],[1,"fas","fa-sync-alt"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","space-x-2",3,"click"],[1,"fas","fa-download"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"pos-card","rounded-2xl","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-green-600","dark:text-green-400"],[1,"w-12","h-12","rounded-xl","bg-green-50","dark:bg-green-900/30","flex","items-center","justify-center","text-green-500"],[1,"fas","fa-indian-rupee-sign","text-xl"],[1,"w-12","h-12","rounded-xl","bg-blue-50","dark:bg-blue-900/30","flex","items-center","justify-center","text-blue-500"],[1,"fas","fa-users","text-xl"],[1,"text-sm","text-red-600","dark:text-red-400"],[1,"w-12","h-12","rounded-xl","bg-red-50","dark:bg-red-900/30","flex","items-center","justify-center","text-red-500"],[1,"fas","fa-chart-line","text-xl"],[1,"w-12","h-12","rounded-xl","bg-purple-50","dark:bg-purple-900/30","flex","items-center","justify-center","text-purple-500"],[1,"fas","fa-calculator","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-8"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","mb-4"],[1,"h-64"],["id","revenueChart"],["id","subscriberChart"],["id","planDistributionChart"],["id","churnChart"],[1,"pos-card","rounded-2xl","p-6","mb-8"],[1,"overflow-x-auto"],[1,"w-full"],[1,"border-b","border-gray-200","dark:border-gray-700"],[1,"text-left","py-3","px-4","font-medium","text-gray-900","dark:text-white"],["class","border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center"],[1,"text-3xl","font-bold","text-primary-600","dark:text-primary-400","mb-2"],[1,"text-3xl","font-bold","text-green-600","dark:text-green-400","mb-2"],[1,"text-3xl","font-bold","text-blue-600","dark:text-blue-400","mb-2"],[1,"border-b","border-gray-100","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-700"],[1,"py-3","px-4"],[1,"flex","items-center","space-x-3"],[1,"w-8","h-8","rounded-lg","bg-primary-100","dark:bg-primary-900/30","flex","items-center","justify-center"],[1,"fas","fa-crown","text-primary-600","dark:text-primary-400","text-sm"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"py-3","px-4","text-gray-900","dark:text-white"],[1,"py-3","px-4","text-gray-900","dark:text-white","font-medium"],[1,"px-2","py-1","text-xs","rounded-full"],[1,"px-2","py-1","text-xs","rounded-full","bg-green-100","text-green-800","dark:bg-green-900/30","dark:text-green-400"]],template:function(r,i){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),n(5,"Subscription Analytics"),t(),e(6,"p",4),n(7,"Comprehensive insights into subscription performance and revenue metrics"),t()(),e(8,"div",5)(9,"button",6),c("click",function(){return i.refreshData()}),s(10,"i",7),e(11,"span"),n(12,"Refresh"),t()(),e(13,"button",8),c("click",function(){return i.exportData()}),s(14,"i",9),e(15,"span"),n(16,"Export"),t()()()()(),e(17,"div",10)(18,"div",11)(19,"div",12)(20,"div")(21,"p",13),n(22,"Monthly Recurring Revenue"),t(),e(23,"h3",3),n(24),t(),e(25,"p",14),n(26,"+12.5% from last month"),t()(),e(27,"div",15),s(28,"i",16),t()()(),e(29,"div",11)(30,"div",12)(31,"div")(32,"p",13),n(33,"Active Subscribers"),t(),e(34,"h3",3),n(35),t(),e(36,"p",14),n(37),t()(),e(38,"div",17),s(39,"i",18),t()()(),e(40,"div",11)(41,"div",12)(42,"div")(43,"p",13),n(44,"Churn Rate"),t(),e(45,"h3",3),n(46),t(),e(47,"p",19),n(48,"-2.1% from last month"),t()(),e(49,"div",20),s(50,"i",21),t()()(),e(51,"div",11)(52,"div",12)(53,"div")(54,"p",13),n(55,"Average Revenue Per User"),t(),e(56,"h3",3),n(57),t(),e(58,"p",14),n(59,"+8.3% from last month"),t()(),e(60,"div",22),s(61,"i",23),t()()()(),e(62,"div",24)(63,"div",11)(64,"h3",25),n(65,"Revenue Trend"),t(),e(66,"div",26),s(67,"canvas",27),t()(),e(68,"div",11)(69,"h3",25),n(70,"Subscriber Growth"),t(),e(71,"div",26),s(72,"canvas",28),t()()(),e(73,"div",24)(74,"div",11)(75,"h3",25),n(76,"Plan Distribution"),t(),e(77,"div",26),s(78,"canvas",29),t()(),e(79,"div",11)(80,"h3",25),n(81,"Churn Rate by Plan"),t(),e(82,"div",26),s(83,"canvas",30),t()()(),e(84,"div",31)(85,"h3",25),n(86,"Plan Performance Details"),t(),e(87,"div",32)(88,"table",33)(89,"thead")(90,"tr",34)(91,"th",35),n(92,"Plan Name"),t(),e(93,"th",35),n(94,"Subscribers"),t(),e(95,"th",35),n(96,"Revenue"),t(),e(97,"th",35),n(98,"Churn Rate"),t(),e(99,"th",35),n(100,"Growth Rate"),t(),e(101,"th",35),n(102,"Avg Tenure"),t()()(),e(103,"tbody"),p(104,w,19,8,"tr",36),t()()()(),e(105,"div",37)(106,"div",11)(107,"h3",25),n(108,"Lifetime Value"),t(),e(109,"div",38)(110,"div",39),n(111),t(),e(112,"p",13),n(113,"Average customer lifetime value"),t()()(),e(114,"div",11)(115,"h3",25),n(116,"Conversion Rate"),t(),e(117,"div",38)(118,"div",40),n(119),t(),e(120,"p",13),n(121,"Trial to paid conversion"),t()()(),e(122,"div",11)(123,"h3",25),n(124,"Annual Recurring Revenue"),t(),e(125,"div",38)(126,"div",41),n(127),t(),e(128,"p",13),n(129,"Projected annual revenue"),t()()()()()),r&2&&(l(24),o(i.formatCurrency(i.metrics.monthlyRecurringRevenue)),l(11),o(i.metrics.activeSubscribers),l(2),u("",i.formatPercentage(i.metrics.activeSubscribers/i.metrics.totalSubscribers*100)," of total"),l(9),o(i.formatPercentage(i.metrics.churnRate)),l(11),o(i.formatCurrency(i.metrics.averageRevenuePerUser)),l(47),v("ngForOf",i.planAnalytics),l(7),o(i.formatCurrency(i.metrics.lifetimeValue)),l(8),o(i.formatPercentage(i.metrics.conversionRate)),l(8),o(i.formatCurrency(i.metrics.annualRecurringRevenue)))},dependencies:[y,f,S]})};export{R as SubscriptionAnalyticsComponent};
